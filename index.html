<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weibull å¯é åº¦åˆ†æ - Mouldexå°ˆç”¨</title>

    <!-- å¼•å…¥å¿…è¦çš„åº« -->
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js" charset="utf-8"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

    <style>
        /* ========== ç†è«–æŒ‡å—å°ˆç”¨æ¨£å¼ (ç¾åŒ–ç‰ˆ) ========== */

        /* ç†è«–æŒ‡å—å½ˆçª—æ•´é«”æ¨£å¼ */
        #theoryModal .batch-modal-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        #theoryModal .batch-modal-header {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            color: #2c3e50;
            font-size: 1.4em;
            font-weight: bold;
            letter-spacing: 0.5px;
            border-bottom: 2px solid #ecf0f1;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        #theoryModal .batch-modal-content>div:nth-child(2) {
            padding: 20px;
            background: #ffffff;
            border-radius: 8px;
            margin: 15px;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
        }

        #theoryModal .batch-buttons {
            margin: 20px 15px 15px 15px;
            text-align: center;
        }

        #theoryModal .btn-clear {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            border: none;
            color: white;
            font-size: 1.1em;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);
        }

        #theoryModal .btn-clear:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(231, 76, 60, 0.4);
            background: linear-gradient(135deg, #c0392b 0%, #a93226 100%);
        }

        /* ç†è«–æŒ‡å—å…§å®¹æ¨£å¼ */
        #theoryModal h2 {
            color: #2c3e50;
            font-size: 1.3em;
            margin: 25px 0 15px 0;
            padding-bottom: 8px;
            border-bottom: 2px solid #3498db;
            position: relative;
        }

        #theoryModal h2::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 60px;
            height: 2px;
            background: linear-gradient(90deg, #3498db, #2980b9);
        }

        #theoryModal h3 {
            color: #34495e;
            font-size: 1.1em;
            margin: 20px 0 10px 0;
            padding-left: 10px;
            border-left: 3px solid #27ae60;
            background: linear-gradient(90deg, #ecf0f1 0%, #ffffff 100%);
            padding: 5px 15px;
            border-radius: 0 5px 5px 0;
        }

        #theoryModal p {
            color: #555;
            line-height: 1.6;
            margin: 10px 0;
            text-align: justify;
        }

        #theoryModal ul {
            padding-left: 20px;
            margin: 10px 0;
        }

        #theoryModal li {
            margin: 8px 0;
            color: #555;
            line-height: 1.5;
        }

        #theoryModal strong.highlight-text {
            color: #2c3e50;
            font-weight: bold;
            background: linear-gradient(120deg, #e8f5e9 0%, #ffffff 100%);
            padding: 2px 6px;
            border-radius: 3px;
            border-left: 3px solid #27ae60;
        }

        /* å…¬å¼æ¡†æ¨£å¼ */
        #theoryModal .formula-box {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        #theoryModal .formula-box::before {
            content: 'âˆ‘';
            position: absolute;
            top: -10px;
            left: 10px;
            font-size: 24px;
            color: #6c757d;
            opacity: 0.6;
        }

        #theoryModal .formula-box p {
            margin: 8px 0 0 0;
            font-size: 0.9em;
            color: #6c757d;
            text-align: right;
        }

        /* è¨ˆç®—ç¯„ä¾‹æ¨£å¼ */
        #theoryModal .calculation-example {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        #theoryModal .calculation-example::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #3498db, #2980b9);
        }

        #theoryModal .calculation-example h3 {
            margin: 0 0 10px 0;
            color: #2c3e50;
            font-size: 1.05em;
            border-left: 3px solid #3498db;
            padding-left: 15px;
            background: none;
            border-bottom: none;
        }

        #theoryModal .calculation-example p {
            margin: 8px 0;
            color: #555;
        }

        /* è¡¨æ ¼æ¨£å¼ */
        #theoryModal table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            overflow: hidden;
        }

        #theoryModal thead {
            background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
            color: white;
        }

        #theoryModal th,
        #theoryModal td {
            border: 1px solid #dee2e6;
            padding: 12px;
            text-align: center;
            vertical-align: middle;
        }

        #theoryModal tbody tr:nth-child(even) {
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
        }

        #theoryModal tbody tr:hover {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            transform: scale(1.01);
            transition: all 0.2s ease;
        }

        #theoryModal th {
            font-weight: bold;
            font-size: 0.95em;
        }

        #theoryModal td {
            font-size: 0.9em;
            color: #495057;
        }

        /* ä»£ç¢¼å€å¡Šæ¨£å¼ */
        #theoryModal .code-block {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            border: 2px solid #34495e;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            overflow-x: auto;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        #theoryModal .code-block pre {
            margin: 0;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            color: #ecf0f1;
            line-height: 1.4;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        /* å€å¡Šé¡è‰²ä¸»é¡Œ */
        #theoryModal .calculation-example[style*="background-color: #fff3e0"] {
            background: linear-gradient(135deg, #fff8e1 0%, #fff3e0 100%);
            border-color: #ffc107;
        }

        #theoryModal .calculation-example[style*="background-color: #e8f8f5"] {
            background: linear-gradient(135deg, #e8f5e9 0%, #e8f8f5 100%);
            border-color: #27ae60;
        }

        #theoryModal .calculation-example[style*="background-color: #f8f9fa"] {
            background: linear-gradient(135deg, #f1f3f4 0%, #f8f9fa 100%);
            border-color: #495057;
        }

        #theoryModal .calculation-example[style*="background-color: #fff3cd"] {
            background: linear-gradient(135deg, #fff3e0 0%, #fff3cd 100%);
            border-color: #ffc107;
        }

        #theoryModal .calculation-example[style*="background-color: #e3f2fd"] {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-color: #2196f3;
        }

        #theoryModal .formula-box {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-color: #dee2e6;
        }

        /* æ»¾å‹•æ¢ç¾åŒ– */
        #theoryModal .batch-modal-content>div:nth-child(2)::-webkit-scrollbar {
            width: 10px;
        }

        #theoryModal .batch-modal-content>div:nth-child(2)::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        #theoryModal .batch-modal-content>div:nth-child(2)::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #3498db, #2980b9);
            border-radius: 10px;
        }

        #theoryModal .batch-modal-content>div:nth-child(2)::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #2980b9, #1f63a8);
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            #theoryModal .batch-modal-content {
                width: 95%;
                margin: 2% auto;
            }

            #theoryModal h2 {
                font-size: 1.1em;
            }

            #theoryModal h3 {
                font-size: 1em;
            }

            #theoryModal table {
                font-size: 0.85em;
            }

            #theoryModal th,
            #theoryModal td {
                padding: 8px 6px;
            }
        }

        /* ========== åŸæœ‰æ¨£å¼ (ä¿ç•™) ========== */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: "Microsoft JhengHei", Arial, sans-serif;
            background-color: #f4f6f8;
            padding: 15px;
            line-height: 1.5;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: #fff;
            padding: 25px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }

        .main-title {
            text-align: center;
            color: #2c3e50;
            border-bottom: 2px solid #eee;
            padding-bottom: 12px;
            margin-bottom: 8px;
            font-size: 1.8em;
        }

        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 20px;
            font-size: 0.9em;
        }

        /* ä¸ŠåŠéƒ¨ï¼šä¸‰æ¬„ä½ˆå±€ */
        .top-section {
            display: grid;
            grid-template-columns: 1fr 1fr 1.2fr;
            gap: 12px;
            margin-bottom: 15px;
        }

        .group-panel {
            border: 2px solid #ddd;
            border-radius: 6px;
            padding: 12px;
            background: #fafafa;
        }

        .group-panel.group-a {
            border-color: #3498db;
        }

        .group-panel.group-b {
            border-color: #e74c3c;
        }

        .group-header {
            font-size: 1.1em;
            font-weight: bold;
            padding: 8px;
            border-radius: 4px;
            text-align: center;
            margin-bottom: 10px;
        }

        .group-header.group-a {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
        }

        .group-header.group-b {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
        }

        .input-group {
            margin-bottom: 8px;
        }

        .input-group label {
            display: block;
            font-weight: bold;
            font-size: 0.85em;
            margin-bottom: 3px;
            color: #555;
        }

        .input-field,
        .calc-input {
            width: 100%;
            padding: 6px 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .input-field:focus,
        .calc-input:focus {
            border-color: #3498db;
            outline: none;
            box-shadow: 0 0 5px rgba(52, 152, 219, 0.5);
        }

        .button-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 5px;
            margin-top: 8px;
        }

        .btn {
            padding: 6px 10px;
            border: none;
            border-radius: 4px;
            font-weight: bold;
            cursor: pointer;
            color: white;
            font-size: 0.85em;
            transition: 0.2s;
        }

        .btn:hover {
            opacity: 0.9;
        }

        .btn-add {
            background-color: #3498db;
        }

        .btn-add-b {
            background-color: #e74c3c;
        }

        .btn-demo {
            background-color: #f39c12;
        }

        .btn-clear {
            background-color: #95a5a6;
            width: 100%;
            margin-top: 5px;
        }

        .table-container {
            max-height: 180px;
            overflow-y: auto;
            margin-top: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85em;
        }

        .data-table thead {
            background-color: #34495e;
            color: white;
            position: sticky;
            top: 0;
        }

        .data-table th,
        .data-table td {
            border: 1px solid #ddd;
            padding: 5px;
            text-align: center;
        }

        .data-table tbody tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        .btn-del {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 2px 6px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 0.8em;
        }

        /* çµæœé¢æ¿ */
        .result-panel {
            background: linear-gradient(135deg, #e8f8f5 0%, #d5f4e6 100%);
            border: 2px solid #2ecc71;
            border-radius: 6px;
            padding: 12px;
            display: none;
        }

        .result-panel.show {
            display: block;
        }

        .result-title {
            text-align: center;
            color: #27ae60;
            font-size: 1.1em;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .formula-display {
            background-color: rgba(255, 255, 255, 0.8);
            padding: 8px;
            border-radius: 4px;
            text-align: center;
            font-size: 1.2em;
            margin-bottom: 10px;
            border: 1px dashed #2ecc71;
            font-family: "Times New Roman", serif;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-bottom: 10px;
        }

        .group-result {
            background: white;
            padding: 8px;
            border-radius: 4px;
            border: 2px solid;
            display: none;
        }

        .group-result.show {
            display: block;
        }

        .group-result.group-a {
            border-color: #3498db;
        }

        .group-result.group-b {
            border-color: #e74c3c;
        }

        .group-result h4 {
            margin: 0 0 8px 0;
            text-align: center;
            font-size: 0.95em;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 5px;
            text-align: center;
        }

        .stat-label {
            font-size: 0.75em;
            color: #666;
            margin-bottom: 2px;
        }

        .stat-value {
            font-size: 1.1em;
            font-weight: bold;
        }

        .diff-panel {
            background: #fff3cd;
            border: 2px solid #f39c12;
            border-radius: 4px;
            padding: 8px;
            margin-top: 8px;
            display: none;
        }

        .diff-panel.show {
            display: block;
        }

        .diff-panel h4 {
            margin: 0 0 8px 0;
            text-align: center;
            color: #f39c12;
            font-size: 0.95em;
        }

        .diff-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 5px;
            text-align: center;
        }

        .diff-value {
            font-size: 1em;
            font-weight: bold;
            color: #f39c12;
        }

        /* æ§åˆ¶æŒ‰éˆ•å€ */
        .control-section {
            background: #ecf0f1;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 15px;
        }

        .marker-input {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 10px;
        }

        .marker-input label {
            font-weight: bold;
            color: #34495e;
            font-size: 0.9em;
        }

        .marker-input input {
            width: 100px;
            padding: 5px 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .button-grid-six {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 8px;
        }

        .btn-uniform {
            padding: 10px;
            border: none;
            border-radius: 4px;
            font-weight: bold;
            cursor: pointer;
            color: white;
            font-size: 0.85em;
            transition: 0.2s;
        }

        .btn-calc {
            background-color: #27ae60;
        }

        .btn-export {
            background-color: #3498db;
        }

        .btn-report {
            background-color: #9b59b6;
        }

        .btn-clear-all {
            background-color: #e74c3c;
        }

        .btn-theory {
            background-color: #34495e;
        }

        .btn-uniform:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        /* åœ–è¡¨å€ */
        .charts-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .chart-box {
            background: #fff;
            border: 1px solid #eaecef;
            border-radius: 12px;
            padding: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
            overflow: hidden;
            position: relative;
            display: grid;
            grid-template-rows: auto 1fr;
            gap: 6px;
        }

        .chart-box>div#chartProb,
        .chart-box>div#chartRel {
            width: 100% !important;
            height: 500px !important;
        }

        .chart-header,
        .rel-marker-bar {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 4px 6px;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.06);
            display: flex;
            align-items: center;
            gap: 6px;
            min-width: 150px;
            max-width: 170px;
            line-height: 1.1;
            height: 32px;
        }

        .chart-header label,
        .rel-marker-bar label {
            font-size: 0.75em;
            color: #555;
            white-space: nowrap;
        }

        .chart-header input,
        .rel-marker-bar input {
            width: 60px;
            padding: 4px 6px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 0.8em;
        }

        .chart-header button,
        .rel-marker-bar button {
            padding: 4px 8px;
            border: none;
            border-radius: 6px;
            background: #2c3e50;
            color: #fff;
            font-size: 0.75em;
            cursor: pointer;
        }

        .chart-header button:hover,
        .rel-marker-bar button:hover {
            opacity: 0.9;
        }

        /* æ‰¹æ¬¡è¼¸å…¥å½ˆçª— */
        .batch-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .batch-modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 20px;
            border: 1px solid #888;
            border-radius: 8px;
            width: 80%;
            max-width: 600px;
        }

        .batch-close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .batch-close:hover {
            color: #000;
        }

        .batch-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .batch-textarea {
            width: 100%;
            height: 200px;
            padding: 10px;
            border: 2px solid #bdc3c7;
            border-radius: 4px;
            font-family: "Courier New", monospace;
            font-size: 14px;
            resize: vertical;
        }

        .batch-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .batch-help {
            background-color: #e8f6f3;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
            font-size: 0.9em;
        }

        @media (max-width: 1400px) {
            .top-section {
                grid-template-columns: 1fr;
            }

            .button-grid-six {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Plotly Mode Bar Adjustment */
        .js-plotly-plot .plotly .modebar {
            transform: translateY(-30px);
        }

        @media (max-width: 900px) {
            .charts-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div id="reportArea">
            <h1 class="main-title">Weibull å¯é åº¦(æˆ–ç´¯ç©å¤±æ•ˆæ©Ÿç‡)åˆ†æ</h1>
            <p class="subtitle">ğŸ’¡ æ”¯æ´å–®çµ„æˆ–é›™çµ„æ•¸æ“šåˆ†æèˆ‡æ¯”å° (Mouldexå°ˆç”¨)</p>

            <!-- ä¸ŠåŠéƒ¨ï¼šä¸‰æ¬„ä½ˆå±€ (çµ„A | çµ„B | çµæœ) -->
            <div class="top-section">
                <!-- çµ„åˆ¥ A -->
                <div class="group-panel group-a">
                    <div class="group-header group-a">çµ„åˆ¥ A</div>

                    <div class="input-group">
                        <label>çµ„åˆ¥åç¨±:</label>
                        <input type="text" id="groupNameA" class="calc-input" placeholder="ä¾‹å¦‚: åŸå§‹è¨­è¨ˆ" value="çµ„åˆ¥ A">
                    </div>

                    <div class="input-group">
                        <label>å£½å‘½ (t):</label>
                        <input type="number" id="tInputA" class="calc-input" placeholder="è¼¸å…¥å£½å‘½å¾ŒæŒ‰ Enter" step="any">
                    </div>

                    <div class="input-group">
                        <label>ç‹€æ…‹:</label>
                        <select id="sInputA" class="calc-input">
                            <option value="F">å¤±æ•ˆ (Failure)</option>
                            <option value="S">å³è¨­é™ (Suspended)</option>
                        </select>
                    </div>

                    <div class="button-grid">
                        <button class="btn btn-add" onclick="showBatchInput('A')">æ‰¹æ¬¡è¼¸å…¥</button>
                        <button class="btn btn-demo" onclick="loadDemo('A')">ç¯„ä¾‹</button>
                    </div>
                    <button class="btn btn-clear" onclick="clearData('A')">æ¸…ç©º</button>

                    <div class="table-container">
                        <table class="data-table" id="dataTableA">
                            <thead>
                                <tr>
                                    <th style="width: 15%;">åºè™Ÿ</th>
                                    <th style="width: 35%;">å£½å‘½</th>
                                    <th style="width: 35%;">ç‹€æ…‹</th>
                                    <th style="width: 15%;">åˆªé™¤</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>

                <!-- çµ„åˆ¥ B -->
                <div class="group-panel group-b">
                    <div class="group-header group-b">çµ„åˆ¥ B</div>

                    <div class="input-group">
                        <label>çµ„åˆ¥åç¨±:</label>
                        <input type="text" id="groupNameB" class="calc-input" placeholder="ä¾‹å¦‚: æ”¹è‰¯è¨­è¨ˆ" value="çµ„åˆ¥ B">
                    </div>

                    <div class="input-group">
                        <label>å£½å‘½ (t):</label>
                        <input type="number" id="tInputB" class="calc-input" placeholder="è¼¸å…¥å£½å‘½å¾ŒæŒ‰ Enter" step="any">
                    </div>

                    <div class="input-group">
                        <label>ç‹€æ…‹:</label>
                        <select id="sInputB" class="calc-input">
                            <option value="F">å¤±æ•ˆ (Failure)</option>
                            <option value="S">å³è¨­é™ (Suspended)</option>
                        </select>
                    </div>

                    <div class="button-grid">
                        <button class="btn btn-add-b" onclick="showBatchInput('B')">æ‰¹æ¬¡è¼¸å…¥</button>
                        <button class="btn btn-demo" onclick="loadDemo('B')">ç¯„ä¾‹</button>
                    </div>
                    <button class="btn btn-clear" onclick="clearData('B')">æ¸…ç©º</button>

                    <div class="table-container">
                        <table class="data-table" id="dataTableB">
                            <thead>
                                <tr>
                                    <th style="width: 15%;">åºè™Ÿ</th>
                                    <th style="width: 35%;">å£½å‘½</th>
                                    <th style="width: 35%;">ç‹€æ…‹</th>
                                    <th style="width: 15%;">åˆªé™¤</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>

                <!-- çµæœé¢æ¿ -->
                <div class="result-panel" id="resultPanel">
                    <div class="result-title">ğŸ“Š åˆ†æçµæœ</div>

                    <div class="formula-display">
                        R(t) = e<sup>-(t/Î·)<sup>Î²</sup></sup>
                    </div>

                    <div class="comparison-grid">
                        <div class="group-result group-a" id="groupResultA">
                            <h4 style="color: #3498db;" id="groupATitleResult">çµ„åˆ¥ A</h4>
                            <div class="stat-grid">
                                <div>
                                    <div class="stat-label">Beta (Î²)</div>
                                    <div class="stat-value" style="color: #3498db;" id="valBetaA">-</div>
                                </div>
                                <div>
                                    <div class="stat-label">Eta (Î·)</div>
                                    <div class="stat-value" style="color: #3498db;" id="valEtaA">-</div>
                                </div>
                                <div>
                                    <div class="stat-label">RÂ²</div>
                                    <div class="stat-value" style="color: #3498db;" id="valR2A">-</div>
                                </div>
                            </div>
                            <div id="descTextA"
                                style="margin-top: 6px; text-align: center; font-size: 0.75em; color: #555;"></div>
                        </div>

                        <div class="group-result group-b" id="groupResultB">
                            <h4 style="color: #e74c3c;" id="groupBTitleResult">çµ„åˆ¥ B</h4>
                            <div class="stat-grid">
                                <div>
                                    <div class="stat-label">Beta (Î²)</div>
                                    <div class="stat-value" style="color: #e74c3c;" id="valBetaB">-</div>
                                </div>
                                <div>
                                    <div class="stat-label">Eta (Î·)</div>
                                    <div class="stat-value" style="color: #e74c3c;" id="valEtaB">-</div>
                                </div>
                                <div>
                                    <div class="stat-label">RÂ²</div>
                                    <div class="stat-value" style="color: #e74c3c;" id="valR2B">-</div>
                                </div>
                            </div>
                            <div id="descTextB"
                                style="margin-top: 6px; text-align: center; font-size: 0.75em; color: #555;"></div>
                        </div>
                    </div>

                    <div class="diff-panel" id="diffPanel">
                        <h4>ğŸ“ˆ å·®ç•°åˆ†æ (B vs A)</h4>
                        <div class="diff-grid">
                            <div>
                                <div class="stat-label">Beta å·®ç•°</div>
                                <div class="diff-value" id="diffBeta">-</div>
                            </div>
                            <div>
                                <div class="stat-label">Eta å·®ç•°</div>
                                <div class="diff-value" id="diffEta">-</div>
                            </div>
                            <div>
                                <div class="stat-label">å£½å‘½æ”¹å–„ç‡</div>
                                <div class="diff-value" id="diffImprovement">-</div>
                            </div>
                        </div>
                        <div id="diffInterpretation"
                            style="margin-top: 6px; text-align: center; font-size: 0.8em; color: #555;"></div>
                    </div>
                </div>
            </div>

            <!-- æ§åˆ¶æŒ‰éˆ•å€ -->
            <div class="control-section">
                <div class="button-grid-six">
                    <button class="btn-uniform btn-calc" onclick="runAnalysis()">ğŸ” é–‹å§‹åˆ†æ</button>
                    <button class="btn-uniform btn-export" onclick="exportData()">ğŸ“Š æ•¸æ“šåŒ¯å‡º</button>
                    <button class="btn-uniform btn-export" onclick="exportCharts()">ğŸ–¼ï¸ åœ–è¡¨åŒ¯å‡º (SVG)</button>
                    <button class="btn-uniform btn-report" onclick="generateReport()">ğŸ“„ ç”¢ç”Ÿå ±å‘Š</button>
                    <button class="btn-uniform btn-clear-all" onclick="clearAllData()">ğŸ—‘ï¸ æ¸…ç©ºå…¨éƒ¨</button>
                    <button class="btn-uniform btn-theory" onclick="openTheory()">ğŸ“˜ ç†è«–æŒ‡å—</button>
                </div>
            </div>

            <!-- åœ–è¡¨å€ -->
            <div class="charts-container">
                <div class="chart-box">
                    <div class="chart-header"></div>
                    <div id="chartProb" style="width:100%;height:500px;"></div>
                </div>
                <div class="chart-box">
                    <div class="rel-marker-bar">
                        <label for="inputReliability">æ¨™ç¤ºå¯é åº¦ (%)</label>
                        <input id="inputReliability" type="number" min="0.1" max="99.9" step="0.1" value="95">
                    </div>
                    <div id="chartRel" style="width:100%;height:500px;"></div>
                </div>
            </div>
        </div>

        <!-- æ‰¹æ¬¡è¼¸å…¥å½ˆå‡ºè¦–çª— -->
        <div id="batchModal" class="batch-modal">
            <div class="batch-modal-content">
                <span class="batch-close" onclick="closeBatchInput()">&times;</span>
                <div class="batch-title" id="batchTitle">æ‰¹æ¬¡è¼¸å…¥æ•¸æ“š</div>
                <textarea id="batchTextarea" class="batch-textarea"
                    placeholder="è«‹è¼¸å…¥æ•¸æ“šï¼Œæ¯è¡Œä¸€ç­†ï¼Œæ ¼å¼ï¼šå£½å‘½,ç‹€æ…‹&#10;ä¾‹å¦‚ï¼š&#10;100,F&#10;150,F&#10;200,S"></textarea>
                <div class="batch-buttons">
                    <button class="btn btn-add" onclick="processBatchInput()">ç¢ºèªåŒ¯å…¥</button>
                    <button class="btn btn-clear" onclick="closeBatchInput()">å–æ¶ˆ</button>
                </div>
                <div class="batch-help">
                    <strong>ğŸ’¡ ä½¿ç”¨èªªæ˜ï¼š</strong><br>
                    â€¢ æ¯è¡Œä¸€ç­†æ•¸æ“šï¼Œæ ¼å¼ï¼šå£½å‘½,ç‹€æ…‹<br>
                    â€¢ ç‹€æ…‹ï¼šF=å¤±æ•ˆï¼ŒS=å³è¨­é™<br>
                    â€¢ ä¾‹å¦‚ï¼š100,F æˆ– 200,S
                </div>
            </div>
        </div>
    </div>

    <script>
        // å…¨åŸŸè®Šæ•¸
        let dataGroupA = [];
        let dataGroupB = [];
        let chartProb = true;
        let chartRel = true;
        let analysisResults = null;
        let t95PointsData = [];
        let markerReliabilityPercent = 95;
        let currentBatchGroup = '';

        // åˆå§‹åŒ–
        window.onload = function () {
            setupEventListeners();
        };

        function setupEventListeners() {
            // çµ„A Enteréµç›£è½
            document.getElementById('tInputA').addEventListener('keydown', function (e) {
                if (e.key === 'Enter') { e.preventDefault(); addData('A'); }
            });
            document.getElementById('sInputA').addEventListener('keydown', function (e) {
                if (e.key === 'Enter') { e.preventDefault(); addData('A'); }
            });

            // çµ„B Enteréµç›£è½
            document.getElementById('tInputB').addEventListener('keydown', function (e) {
                if (e.key === 'Enter') { e.preventDefault(); addData('B'); }
            });
            document.getElementById('sInputB').addEventListener('keydown', function (e) {
                if (e.key === 'Enter') { e.preventDefault(); addData('B'); }
            });



            // è¨­å®šç„¦é»
            document.getElementById('tInputA').focus();
        }

        function addData(group) {
            const tInput = document.getElementById(`tInput${group}`);
            const sInput = document.getElementById(`sInput${group}`);
            const t = parseFloat(tInput.value);
            const s = sInput.value;

            if (isNaN(t) || t <= 0) {
                if (tInput.value !== "") alert("è«‹è¼¸å…¥å¤§æ–¼ 0 çš„æœ‰æ•ˆå£½å‘½");
                return;
            }

            if (group === 'A') {
                dataGroupA.push({ t: t, s: s });
                sortDataArray('A');
                updateTable('A');
            } else {
                dataGroupB.push({ t: t, s: s });
                sortDataArray('B');
                updateTable('B');
            }

            tInput.value = '';
            tInput.focus();
        }

        function sortDataArray(group) {
            const data = group === 'A' ? dataGroupA : dataGroupB;
            data.sort((a, b) => {
                if (a.t !== b.t) return a.t - b.t;
                return (a.s === 'F' ? -1 : 1);
            });
        }

        function updateTable(group) {
            const data = group === 'A' ? dataGroupA : dataGroupB;
            const tbody = document.querySelector(`#dataTable${group} tbody`);
            tbody.innerHTML = '';

            data.forEach((item, idx) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td style="color:#aaa;">${idx + 1}</td>
                    <td style="font-weight:bold;">${item.t}</td>
                    <td style="color:${item.s === 'F' ? '#e74c3c' : '#2980b9'}; font-weight:bold;">
                        ${item.s === 'F' ? 'å¤±æ•ˆ' : 'è¨­é™'}
                    </td>
                    <td><button class="btn-del" onclick="deleteRow('${group}', ${idx})">X</button></td>
                `;
                tbody.appendChild(tr);
            });
        }

        function deleteRow(group, idx) {
            if (group === 'A') {
                dataGroupA.splice(idx, 1);
                updateTable('A');
            } else {
                dataGroupB.splice(idx, 1);
                updateTable('B');
            }
        }

        function clearData(group) {
            if (!confirm(`ç¢ºå®šè¦æ¸…ç©ºçµ„åˆ¥ ${group} çš„æ‰€æœ‰æ•¸æ“šå—ï¼Ÿ`)) return;

            if (group === 'A') {
                dataGroupA = [];
                updateTable('A');
            } else {
                dataGroupB = [];
                updateTable('B');
            }
        }

        function clearAllData() {
            if (!confirm('ç¢ºå®šè¦æ¸…ç©ºå…©çµ„çš„æ‰€æœ‰æ•¸æ“šå’Œåœ–è¡¨å—ï¼Ÿ')) return;

            dataGroupA = [];
            dataGroupB = [];
            analysisResults = null;
            t95PointsData = [];

            updateTable('A');
            updateTable('B');

            try {
                Plotly.purge('chartProb');
                Plotly.purge('chartRel');
                chartProb = false;
                chartRel = false;
            } catch (e) {
                console.log('åœ–è¡¨æ¸…é™¤:', e);
            }

            document.getElementById('resultPanel').classList.remove('show');
            document.getElementById('groupResultA').classList.remove('show');
            document.getElementById('groupResultB').classList.remove('show');
            document.getElementById('diffPanel').classList.remove('show');

            alert('âœ… å·²æ¸…ç©ºæ‰€æœ‰æ•¸æ“šå’Œåœ–è¡¨ï¼');
        }

        function loadDemo(group) {
            const demoData = [
                { t: 300, s: 'F' }, { t: 100, s: 'F' }, { t: 250, s: 'S' },
                { t: 150, s: 'F' }, { t: 550, s: 'F' }, { t: 120, s: 'S' },
                { t: 400, s: 'F' }, { t: 200, s: 'F' }
            ];

            if (group === 'A') {
                dataGroupA = [...demoData];
                sortDataArray('A');
                updateTable('A');
            } else {
                // çµ„Bä½¿ç”¨ç¨å¾®ä¸åŒçš„æ•¸æ“š
                const demoBData = demoData.map(d => ({ t: d.t * 1.2, s: d.s }));
                dataGroupB = demoBData;
                sortDataArray('B');
                updateTable('B');
            }

            alert(`âœ… å·²è¼‰å…¥çµ„åˆ¥ ${group} çš„ç¯„ä¾‹æ•¸æ“šï¼`);
        }

        // æ‰¹æ¬¡è¼¸å…¥åŠŸèƒ½
        function showBatchInput(group) {
            currentBatchGroup = group;
            document.getElementById('batchTitle').textContent = `æ‰¹æ¬¡è¼¸å…¥æ•¸æ“š - çµ„åˆ¥ ${group}`;
            document.getElementById('batchModal').style.display = 'block';
            document.getElementById('batchTextarea').value = '';
            document.getElementById('batchTextarea').focus();
        }

        function closeBatchInput() {
            document.getElementById('batchModal').style.display = 'none';
            currentBatchGroup = '';
        }

        function processBatchInput() {
            const textarea = document.getElementById('batchTextarea');
            const text = textarea.value.trim();

            if (!text) {
                alert("è«‹è¼¸å…¥æ•¸æ“šï¼");
                return;
            }

            const lines = text.split('\n');
            let successCount = 0;
            let errorCount = 0;
            const errors = [];

            lines.forEach((line, index) => {
                line = line.trim();
                if (!line) return; // è·³éç©ºè¡Œ

                // æ”¯æ´å¤šç¨®åˆ†éš”ç¬¦ï¼šTabã€é€—è™Ÿã€ç©ºæ ¼
                const parts = line.split(/[\t,\s]+/);

                if (parts.length < 2) {
                    errors.push(`ç¬¬ ${index + 1} è¡Œï¼šæ ¼å¼éŒ¯èª¤ï¼ˆéœ€è¦å…©æ¬„æ•¸æ“šï¼‰`);
                    errorCount++;
                    return;
                }

                const t = parseFloat(parts[0]);
                let s = parts[1].toUpperCase();

                // é©—è­‰æ•¸æ“š
                if (isNaN(t) || t <= 0) {
                    errors.push(`ç¬¬ ${index + 1} è¡Œï¼šå£½å‘½å¿…é ˆæ˜¯å¤§æ–¼ 0 çš„æ•¸å­—`);
                    errorCount++;
                    return;
                }

                if (s !== 'F' && s !== 'S') {
                    errors.push(`ç¬¬ ${index + 1} è¡Œï¼šç‹€æ…‹å¿…é ˆæ˜¯ F æˆ– S`);
                    errorCount++;
                    return;
                }

                // åŠ å…¥æ•¸æ“š
                if (currentBatchGroup === 'A') {
                    dataGroupA.push({ t: t, s: s });
                } else {
                    dataGroupB.push({ t: t, s: s });
                }
                successCount++;
            });

            // æ›´æ–°è¡¨æ ¼
            if (successCount > 0) {
                if (currentBatchGroup === 'A') {
                    sortDataArray('A');
                    updateTable('A');
                } else {
                    sortDataArray('B');
                    updateTable('B');
                }
            }

            // é¡¯ç¤ºçµæœ
            closeBatchInput();

            if (errorCount > 0) {
                alert(`âœ… æˆåŠŸåŠ å…¥ ${successCount} ç­†æ•¸æ“š\nâŒ ${errorCount} ç­†æ•¸æ“šæœ‰èª¤ï¼š\n\n${errors.slice(0, 5).join('\n')}${errors.length > 5 ? '\n...(æ›´å¤šéŒ¯èª¤)' : ''}`);
            } else {
                alert(`âœ… æˆåŠŸåŠ å…¥ ${successCount} ç­†æ•¸æ“šï¼`);
            }
        }

        // ========== ç¬¬ä¸€éšæ®µï¼šWeibull åˆ†ææ ¸å¿ƒåŠŸèƒ½ ==========

        function runAnalysis() {
            // æª¢æŸ¥æ•¸æ“š
            const hasDataA = dataGroupA.length > 0;
            const hasDataB = dataGroupB.length > 0;

            if (!hasDataA && !hasDataB) {
                alert("âŒ è«‹è‡³å°‘è¼¸å…¥ä¸€çµ„æ•¸æ“šï¼");
                return;
            }

            // åˆ†æçµ„A
            let resultsA = null;
            if (hasDataA) {
                resultsA = analyzeGroup(dataGroupA, 'A');
                if (!resultsA) return;
            }

            // åˆ†æçµ„B
            let resultsB = null;
            if (hasDataB) {
                resultsB = analyzeGroup(dataGroupB, 'B');
                if (!resultsB) return;
            }

            // å„²å­˜çµæœ
            analysisResults = {
                groupA: resultsA,
                groupB: resultsB,
                mode: (hasDataA && hasDataB) ? 'dual' : 'single'
            };

            // é¡¯ç¤ºçµæœ
            displayResults(resultsA, resultsB);

            // ç¹ªè£½åœ–è¡¨
            drawCharts(resultsA, resultsB);

            alert('âœ… åˆ†æå®Œæˆï¼\n\nğŸ“Š åœ–è¡¨å·²ç¹ªè£½å®Œæˆã€‚');
        }

        function analyzeGroup(data, group) {
            // æª¢æŸ¥å¤±æ•ˆæ•¸æ“š
            const failures = data.filter(d => d.s === 'F');
            if (failures.length < 2) {
                alert(`âŒ çµ„åˆ¥ ${group} è‡³å°‘éœ€è¦ 2 å€‹å¤±æ•ˆæ•¸æ“šæ‰èƒ½è¨ˆç®—åƒæ•¸ã€‚`);
                return null;
            }

            const N = data.length;
            let points = [];
            let previousOrderNumber = 0;

            // è¨ˆç®—ä¸­ä½ç§©
            for (let i = 0; i < N; i++) {
                let item = data[i];
                let reverseRank = N - i;
                let increment = ((N + 1) - previousOrderNumber) / reverseRank;
                let newOrderNumber = previousOrderNumber + increment;

                if (item.s === 'F') {
                    let medianRank = (newOrderNumber - 0.3) / (N + 0.4);
                    if (medianRank >= 0.99999) medianRank = 0.99999;

                    let x = Math.log(item.t);
                    let term = -Math.log(1 - medianRank);
                    let y = Math.log(term);

                    if (isFinite(x) && isFinite(y)) {
                        points.push({ x: x, y: y });
                    }
                }
                previousOrderNumber = newOrderNumber;
            }

            if (points.length < 2) {
                alert(`âŒ çµ„åˆ¥ ${group} æœ‰æ•ˆæ•¸æ“šé»ä¸è¶³ï¼Œç„¡æ³•æ“¬åˆã€‚`);
                return null;
            }

            // ç·šæ€§å›æ­¸
            let sumX = 0, sumY = 0, sumXY = 0, sumXX = 0;
            let nP = points.length;

            points.forEach(p => {
                sumX += p.x;
                sumY += p.y;
                sumXY += (p.x * p.y);
                sumXX += (p.x * p.x);
            });

            let slope = (nP * sumXY - sumX * sumY) / (nP * sumXX - sumX * sumX);
            let intercept = (sumY - slope * sumX) / nP;

            let beta = slope;
            let eta = Math.exp(-intercept / beta);

            // è¨ˆç®— RÂ²
            let yMean = sumY / nP;
            let ssTot = points.reduce((acc, p) => acc + Math.pow(p.y - yMean, 2), 0);
            let ssRes = points.reduce((acc, p) => acc + Math.pow(p.y - (slope * p.x + intercept), 2), 0);
            let r2 = 1 - (ssRes / ssTot);

            // åˆ¤å®šå¤±æ•ˆæ¨¡å¼
            let typeText = "";
            if (beta < 1) typeText = "æ—©æœŸå¤±æ•ˆ (Infant Mortality)";
            else if (beta < 1.1) typeText = "éš¨æ©Ÿå¤±æ•ˆ (Constant Failure Rate)";
            else typeText = "ç£¨è€—å¤±æ•ˆ (Wear-out)";

            return {
                beta: beta,
                eta: eta,
                r2: r2,
                typeText: typeText,
                points: points,
                slope: slope,
                intercept: intercept,
                maxT: data[data.length - 1].t
            };
        }

        function displayResults(resultsA, resultsB) {
            const resultPanel = document.getElementById('resultPanel');
            const groupResultA = document.getElementById('groupResultA');
            const groupResultB = document.getElementById('groupResultB');
            const diffPanel = document.getElementById('diffPanel');

            // é¡¯ç¤ºçµæœé¢æ¿
            resultPanel.classList.add('show');

            // é¡¯ç¤ºçµ„Açµæœ
            if (resultsA) {
                groupResultA.classList.add('show');
                document.getElementById('groupATitleResult').textContent = document.getElementById('groupNameA').value;
                document.getElementById('valBetaA').textContent = resultsA.beta.toFixed(4);
                document.getElementById('valEtaA').textContent = resultsA.eta.toFixed(2);
                document.getElementById('valR2A').textContent = resultsA.r2.toFixed(4);
                document.getElementById('descTextA').textContent = resultsA.typeText;
            } else {
                groupResultA.classList.remove('show');
            }

            // é¡¯ç¤ºçµ„Bçµæœ
            if (resultsB) {
                groupResultB.classList.add('show');
                document.getElementById('groupBTitleResult').textContent = document.getElementById('groupNameB').value;
                document.getElementById('valBetaB').textContent = resultsB.beta.toFixed(4);
                document.getElementById('valEtaB').textContent = resultsB.eta.toFixed(2);
                document.getElementById('valR2B').textContent = resultsB.r2.toFixed(4);
                document.getElementById('descTextB').textContent = resultsB.typeText;
            } else {
                groupResultB.classList.remove('show');
            }

            // é¡¯ç¤ºå·®ç•°åˆ†æï¼ˆé›™çµ„æ¨¡å¼ï¼‰
            if (resultsA && resultsB) {
                diffPanel.classList.add('show');

                const betaDiff = ((resultsB.beta - resultsA.beta) / resultsA.beta * 100);
                const etaDiff = ((resultsB.eta - resultsA.eta) / resultsA.eta * 100);

                document.getElementById('diffBeta').textContent = (betaDiff >= 0 ? '+' : '') + betaDiff.toFixed(2) + '%';
                document.getElementById('diffEta').textContent = (etaDiff >= 0 ? '+' : '') + etaDiff.toFixed(2) + '%';
                document.getElementById('diffImprovement').textContent = (etaDiff >= 0 ? '+' : '') + etaDiff.toFixed(2) + '%';

                let interpretation = '';
                if (etaDiff > 10) {
                    interpretation = 'âœ… çµ„åˆ¥ B å£½å‘½é¡¯è‘—å„ªæ–¼çµ„åˆ¥ A';
                } else if (etaDiff > 0) {
                    interpretation = 'âœ“ çµ„åˆ¥ B å£½å‘½ç•¥å„ªæ–¼çµ„åˆ¥ A';
                } else if (etaDiff > -10) {
                    interpretation = 'â‰ˆ å…©çµ„å£½å‘½ç›¸è¿‘';
                } else {
                    interpretation = 'âš ï¸ çµ„åˆ¥ B å£½å‘½ä½æ–¼çµ„åˆ¥ A';
                }
                document.getElementById('diffInterpretation').textContent = interpretation;
            } else {
                diffPanel.classList.remove('show');
            }
        }

        // ========== ç¬¬äºŒéšæ®µï¼šPlotly åœ–è¡¨ç¹ªè£½åŠŸèƒ½ ==========

        function drawCharts(resultsA, resultsB) {
            // æ¸…ç©ºèˆŠçš„ t95 é»æ•¸æ“š
            t95PointsData = [];

            const groupNameA = document.getElementById('groupNameA').value;
            const groupNameB = document.getElementById('groupNameB').value;

            // ===== Probability Plot (Plotly.js) =====
            let probTraces = [];

            if (resultsA) {
                let minXA = Math.min(...resultsA.points.map(p => p.x));
                let maxXA = Math.max(...resultsA.points.map(p => p.x));

                // å¤±æ•ˆæ•¸æ“šé»
                probTraces.push({
                    x: resultsA.points.map(p => p.x),
                    y: resultsA.points.map(p => p.y),
                    mode: 'markers',
                    type: 'scatter',
                    name: `${groupNameA} - å¤±æ•ˆæ•¸æ“šé»`,
                    marker: { color: '#3498db', size: 8 }
                });

                // è¶¨å‹¢ç·š
                probTraces.push({
                    x: [minXA - 0.5, maxXA + 0.5],
                    y: [resultsA.slope * (minXA - 0.5) + resultsA.intercept,
                    resultsA.slope * (maxXA + 0.5) + resultsA.intercept],
                    mode: 'lines',
                    type: 'scatter',
                    name: `${groupNameA} - Weibull è¶¨å‹¢ç·š`,
                    line: { color: '#3498db', width: 2, dash: 'dash' }
                });
            }

            if (resultsB) {
                let minXB = Math.min(...resultsB.points.map(p => p.x));
                let maxXB = Math.max(...resultsB.points.map(p => p.x));

                // å¤±æ•ˆæ•¸æ“šé»
                probTraces.push({
                    x: resultsB.points.map(p => p.x),
                    y: resultsB.points.map(p => p.y),
                    mode: 'markers',
                    type: 'scatter',
                    name: `${groupNameB} - å¤±æ•ˆæ•¸æ“šé»`,
                    marker: { color: '#e74c3c', size: 8 }
                });

                // è¶¨å‹¢ç·š
                probTraces.push({
                    x: [minXB - 0.5, maxXB + 0.5],
                    y: [resultsB.slope * (minXB - 0.5) + resultsB.intercept,
                    resultsB.slope * (maxXB + 0.5) + resultsB.intercept],
                    mode: 'lines',
                    type: 'scatter',
                    name: `${groupNameB} - Weibull è¶¨å‹¢ç·š`,
                    line: { color: '#e74c3c', width: 2, dash: 'dash' }
                });
            }

            const chartTitle = (resultsA && resultsB) ? 'Weibull Probability Plot - é›™çµ„æ¯”å°' : 'Weibull Probability Plot';

            const probLayout = {
                title: { text: chartTitle, font: { size: 16 } },
                xaxis: {
                    title: 'ln(t)',
                    automargin: true
                },
                yaxis: {
                    title: 'ln(-ln(1-F(t)))',
                    automargin: true
                },
                plot_bgcolor: 'white',
                paper_bgcolor: 'white',
                hovermode: 'closest',
                margin: { l: 60, r: 20, t: 60, b: 60 },
                legend: {
                    x: 0.15,
                    y: 0.98,
                    xanchor: 'left',
                    yanchor: 'top',
                    bgcolor: 'rgba(255, 255, 255, 0.9)',
                    bordercolor: '#ddd',
                    borderwidth: 1
                },
                autosize: true
            };

            const probConfig = {
                responsive: true,
                displayModeBar: true,
                displaylogo: false,
                modeBarPosition: 'top-right'
            };

            Plotly.newPlot('chartProb', probTraces, probLayout, probConfig);

            // ===== Reliability Curve (Plotly.js) =====
            let relTraces = [];
            let markerPoints = []; // æ”¶é›†æ¨™è¨˜é»ä»¥æª¢æ¸¬é‡ç–Š

            if (resultsA) {
                let relPointsA_x = [];
                let relPointsA_y = [];
                let plotMaxA = resultsA.maxT * 1.5;
                let stepA = plotMaxA / 2000;
                for (let t = 0; t <= plotMaxA; t += stepA) {
                    let R = Math.exp(-Math.pow(t / resultsA.eta, resultsA.beta));
                    relPointsA_x.push(t);
                    relPointsA_y.push(R * 100);
                }

                relTraces.push({
                    x: relPointsA_x,
                    y: relPointsA_y,
                    mode: 'lines',
                    type: 'scatter',
                    name: `${groupNameA} - R(t)`,
                    line: { color: '#3498db', width: 2 }
                });


            }

            if (resultsB) {
                let relPointsB_x = [];
                let relPointsB_y = [];
                let plotMaxB = resultsB.maxT * 1.5;
                let stepB = plotMaxB / 2000;
                for (let t = 0; t <= plotMaxB; t += stepB) {
                    let R = Math.exp(-Math.pow(t / resultsB.eta, resultsB.beta));
                    relPointsB_x.push(t);
                    relPointsB_y.push(R * 100);
                }

                relTraces.push({
                    x: relPointsB_x,
                    y: relPointsB_y,
                    mode: 'lines',
                    type: 'scatter',
                    name: `${groupNameB} - R(t)`,
                    line: { color: '#e74c3c', width: 2 }
                });


            }





            const relChartTitle = (resultsA && resultsB) ? 'å¯é åº¦æ›²ç·šæ¯”å° (Reliability Curve Comparison)' : 'å¯é åº¦æ›²ç·š (Reliability Curve)';

            const relLayout = {
                title: { text: relChartTitle, font: { size: 16 } },
                xaxis: {
                    title: 'å£½å‘½ (t)',
                    automargin: true
                },
                yaxis: {
                    title: 'å¯é åº¦ (%)',
                    range: [0, 100],
                    automargin: true
                },
                plot_bgcolor: 'white',
                paper_bgcolor: 'white',
                hovermode: 'closest',
                margin: { l: 60, r: 20, t: 60, b: 60 },
                legend: {
                    x: 0.98,
                    y: 0.98,
                    xanchor: 'right',
                    yanchor: 'top',
                    bgcolor: 'rgba(255, 255, 255, 0.9)',
                    bordercolor: '#ddd',
                    borderwidth: 1
                },
                autosize: true,

            };

            const relConfig = {
                responsive: true,
                displayModeBar: true,
                displaylogo: false
            };

            Plotly.newPlot('chartRel', relTraces, relLayout, relConfig);

            // åˆå§‹åŒ–æˆ–æ›´æ–°æ¨™ç¤ºå¯é åº¦
            if (markerReliabilityPercent) {
                updateReliabilityMarkers(markerReliabilityPercent);
            }
        }

        // ========== ç¬¬ä¸‰éšæ®µï¼šæ•¸æ“šå’Œåœ–è¡¨åŒ¯å‡ºåŠŸèƒ½ ==========

        function exportData() {
            if (!analysisResults || (!analysisResults.groupA && !analysisResults.groupB)) {
                alert("âŒ è«‹å…ˆåŸ·è¡Œåˆ†æä»¥ç”¢ç”Ÿçµæœï¼");
                return;
            }

            const groupNameA = document.getElementById('groupNameA').value;
            const groupNameB = document.getElementById('groupNameB').value;
            const mode = analysisResults.mode;

            let csvContent = `Weibull å¯é åº¦åˆ†æçµæœ - ${mode === 'dual' ? 'é›™çµ„æ¯”å°' : 'å–®çµ„åˆ†æ'}\n\n`;

            // ===== åˆ†æåƒæ•¸ä¸¦æ’ =====
            if (mode === 'dual' && analysisResults.groupA && analysisResults.groupB) {
                csvContent += `=== çµ„åˆ¥ A åˆ†æåƒæ•¸ ===,,,,,,=== çµ„åˆ¥ B åˆ†æåƒæ•¸ ===,,,,,,=== å·®ç•°åˆ†æ (B vs A) ===\n`;
                csvContent += `åƒæ•¸åç¨±,æ•¸å€¼,,,,,åƒæ•¸åç¨±,æ•¸å€¼,,,,,é …ç›®,å·®ç•°ç™¾åˆ†æ¯”\n`;

                const betaDiff = ((analysisResults.groupB.beta - analysisResults.groupA.beta) / analysisResults.groupA.beta * 100);
                const etaDiff = ((analysisResults.groupB.eta - analysisResults.groupA.eta) / analysisResults.groupA.eta * 100);

                csvContent += `å½¢ç‹€åƒæ•¸,${analysisResults.groupA.beta.toFixed(4)},,,,,å½¢ç‹€åƒæ•¸,${analysisResults.groupB.beta.toFixed(4)},,,,,Beta å·®ç•°,${betaDiff.toFixed(2)}%\n`;
                csvContent += `ç‰¹å¾µå£½å‘½,${analysisResults.groupA.eta.toFixed(2)},,,,,ç‰¹å¾µå£½å‘½,${analysisResults.groupB.eta.toFixed(2)},,,,,Eta å·®ç•°,${etaDiff.toFixed(2)}%\n`;
                csvContent += `æ“¬åˆåº¦ RÂ²,${analysisResults.groupA.r2.toFixed(4)},,,,,æ“¬åˆåº¦ RÂ²,${analysisResults.groupB.r2.toFixed(4)},,,,,å£½å‘½æ”¹å–„ç‡,${etaDiff.toFixed(2)}%\n`;
                csvContent += `å¤±æ•ˆæ¨¡å¼,${analysisResults.groupA.typeText},,,,,å¤±æ•ˆæ¨¡å¼,${analysisResults.groupB.typeText}\n\n`;
            } else {
                // å–®çµ„æ¨¡å¼
                if (analysisResults.groupA) {
                    csvContent += `=== ${groupNameA} åˆ†æåƒæ•¸ ===\n`;
                    csvContent += "åƒæ•¸åç¨±,æ•¸å€¼\n";
                    csvContent += `å½¢ç‹€åƒæ•¸ Beta (Î²),${analysisResults.groupA.beta.toFixed(4)}\n`;
                    csvContent += `ç‰¹å¾µå£½å‘½ Eta (Î·),${analysisResults.groupA.eta.toFixed(2)}\n`;
                    csvContent += `æ“¬åˆåº¦ RÂ²,${analysisResults.groupA.r2.toFixed(4)}\n`;
                    csvContent += `å¤±æ•ˆæ¨¡å¼,${analysisResults.groupA.typeText}\n\n`;
                }
                if (analysisResults.groupB) {
                    csvContent += `=== ${groupNameB} åˆ†æåƒæ•¸ ===\n`;
                    csvContent += "åƒæ•¸åç¨±,æ•¸å€¼\n";
                    csvContent += `å½¢ç‹€åƒæ•¸ Beta (Î²),${analysisResults.groupB.beta.toFixed(4)}\n`;
                    csvContent += `ç‰¹å¾µå£½å‘½ Eta (Î·),${analysisResults.groupB.eta.toFixed(2)}\n`;
                    csvContent += `æ“¬åˆåº¦ RÂ²,${analysisResults.groupB.r2.toFixed(4)}\n`;
                    csvContent += `å¤±æ•ˆæ¨¡å¼,${analysisResults.groupB.typeText}\n\n`;
                }
            }

            // ===== åŸå§‹æ•¸æ“šä¸¦æ’ =====
            if (mode === 'dual' && dataGroupA.length > 0 && dataGroupB.length > 0) {
                csvContent += `=== ${groupNameA} åŸå§‹æ•¸æ“š ===,,,,,,=== ${groupNameB} åŸå§‹æ•¸æ“š ===\n`;
                csvContent += "åºè™Ÿ,å£½å‘½ (t),ç‹€æ…‹(F:å¤±æ•ˆ/S:å³è¨­é™),,,,åºè™Ÿ,å£½å‘½ (t),ç‹€æ…‹(F:å¤±æ•ˆ/S:å³è¨­é™)\n";

                const maxLen = Math.max(dataGroupA.length, dataGroupB.length);
                for (let i = 0; i < maxLen; i++) {
                    let rowA = i < dataGroupA.length ? `${i + 1},${dataGroupA[i].t},${dataGroupA[i].s}` : ',,';
                    let rowB = i < dataGroupB.length ? `${i + 1},${dataGroupB[i].t},${dataGroupB[i].s}` : ',,';
                    csvContent += `${rowA},,,,${rowB}\n`;
                }
                csvContent += "\n";
            } else {
                // å–®çµ„æ¨¡å¼
                if (dataGroupA.length > 0) {
                    csvContent += `=== ${groupNameA} åŸå§‹æ•¸æ“š ===\n`;
                    csvContent += "åºè™Ÿ,å£½å‘½ (t),ç‹€æ…‹(F:å¤±æ•ˆ/S:å³è¨­é™)\n";
                    dataGroupA.forEach((item, idx) => {
                        csvContent += `${idx + 1},${item.t},${item.s}\n`;
                    });
                    csvContent += "\n";
                }
                if (dataGroupB.length > 0) {
                    csvContent += `=== ${groupNameB} åŸå§‹æ•¸æ“š ===\n`;
                    csvContent += "åºè™Ÿ,å£½å‘½ (t),ç‹€æ…‹(F:å¤±æ•ˆ/S:å³è¨­é™)\n";
                    dataGroupB.forEach((item, idx) => {
                        csvContent += `${idx + 1},${item.t},${item.s}\n`;
                    });
                    csvContent += "\n";
                }
            }

            // ===== B-Life æ•¸æ“šä¸¦æ’ =====
            if (mode === 'dual' && analysisResults.groupA && analysisResults.groupB) {
                csvContent += `=== ${groupNameA} B-Life æ•¸æ“š ===,,,,,,=== ${groupNameB} B-Life æ•¸æ“š ===\n`;
                csvContent += "B-Life,æ™‚é–“ (t),èªªæ˜,,,,B-Life,æ™‚é–“ (t),èªªæ˜\n";

                const bLifeValues = [1, 5, 10, 20, 50];
                bLifeValues.forEach(b => {
                    const RA = (100 - b) / 100;
                    const tA = analysisResults.groupA.eta * Math.pow(-Math.log(RA), 1 / analysisResults.groupA.beta);
                    const RB = (100 - b) / 100;
                    const tB = analysisResults.groupB.eta * Math.pow(-Math.log(RB), 1 / analysisResults.groupB.beta);
                    csvContent += `B${b},${tA.toFixed(2)},${b}% ç”¢å“å¤±æ•ˆæ™‚çš„å£½å‘½,,,,B${b},${tB.toFixed(2)},${b}% ç”¢å“å¤±æ•ˆæ™‚çš„å£½å‘½\n`;
                });
                csvContent += "\n";
            } else {
                // å–®çµ„æ¨¡å¼
                if (analysisResults.groupA) {
                    csvContent += `=== ${groupNameA} B-Life æ•¸æ“š ===\n`;
                    csvContent += "B-Life,æ™‚é–“ (t),èªªæ˜\n";
                    const bLifeValues = [1, 5, 10, 20, 50];
                    bLifeValues.forEach(b => {
                        const R = (100 - b) / 100;
                        const t = analysisResults.groupA.eta * Math.pow(-Math.log(R), 1 / analysisResults.groupA.beta);
                        csvContent += `B${b},${t.toFixed(2)},${b}% ç”¢å“å¤±æ•ˆæ™‚çš„å£½å‘½\n`;
                    });
                    csvContent += "\n";
                }
                if (analysisResults.groupB) {
                    csvContent += `=== ${groupNameB} B-Life æ•¸æ“š ===\n`;
                    csvContent += "B-Life,æ™‚é–“ (t),èªªæ˜\n";
                    const bLifeValues = [1, 5, 10, 20, 50];
                    bLifeValues.forEach(b => {
                        const R = (100 - b) / 100;
                        const t = analysisResults.groupB.eta * Math.pow(-Math.log(R), 1 / analysisResults.groupB.beta);
                        csvContent += `B${b},${t.toFixed(2)},${b}% ç”¢å“å¤±æ•ˆæ™‚çš„å£½å‘½\n`;
                    });
                    csvContent += "\n";
                }
            }

            // ===== å¯é åº¦æ›²ç·šæ•¸æ“šä¸¦æ’ =====
            if (mode === 'dual' && analysisResults.groupA && analysisResults.groupB) {
                const maxTA = Math.max(...dataGroupA.map(d => d.t)) * 1.5;
                const maxTB = Math.max(...dataGroupB.map(d => d.t)) * 1.5;

                csvContent += `=== ${groupNameA} å¯é åº¦æ›²ç·šæ•¸æ“š (200é») ===,,,,,,=== ${groupNameB} å¯é åº¦æ›²ç·šæ•¸æ“š (200é») ===\n`;
                csvContent += "å£½å‘½ (t),å¯é åº¦ R(t) (%),å¤±æ•ˆç‡ F(t) (%),,,,å£½å‘½ (t),å¯é åº¦ R(t) (%),å¤±æ•ˆç‡ F(t) (%)\n";

                for (let i = 0; i <= 200; i++) {
                    const tA = maxTA * i / 200;
                    const RA = Math.exp(-Math.pow(tA / analysisResults.groupA.eta, analysisResults.groupA.beta)) * 100;
                    const FA = 100 - RA;

                    const tB = maxTB * i / 200;
                    const RB = Math.exp(-Math.pow(tB / analysisResults.groupB.eta, analysisResults.groupB.beta)) * 100;
                    const FB = 100 - RB;

                    csvContent += `${tA.toFixed(2)},${RA.toFixed(4)},${FA.toFixed(4)},,,,${tB.toFixed(2)},${RB.toFixed(4)},${FB.toFixed(4)}\n`;
                }
            } else {
                // å–®çµ„æ¨¡å¼
                if (analysisResults.groupA) {
                    const maxT = Math.max(...dataGroupA.map(d => d.t)) * 1.5;
                    csvContent += `=== ${groupNameA} å¯é åº¦æ›²ç·šæ•¸æ“š (200é») ===\n`;
                    csvContent += "å£½å‘½ (t),å¯é åº¦ R(t) (%),å¤±æ•ˆç‡ F(t) (%)\n";
                    for (let i = 0; i <= 200; i++) {
                        const t = maxT * i / 200;
                        const R = Math.exp(-Math.pow(t / analysisResults.groupA.eta, analysisResults.groupA.beta)) * 100;
                        const F = 100 - R;
                        csvContent += `${t.toFixed(2)},${R.toFixed(4)},${F.toFixed(4)}\n`;
                    }
                    csvContent += "\n";
                }
                if (analysisResults.groupB) {
                    const maxT = Math.max(...dataGroupB.map(d => d.t)) * 1.5;
                    csvContent += `=== ${groupNameB} å¯é åº¦æ›²ç·šæ•¸æ“š (200é») ===\n`;
                    csvContent += "å£½å‘½ (t),å¯é åº¦ R(t) (%),å¤±æ•ˆç‡ F(t) (%)\n";
                    for (let i = 0; i <= 200; i++) {
                        const t = maxT * i / 200;
                        const R = Math.exp(-Math.pow(t / analysisResults.groupB.eta, analysisResults.groupB.beta)) * 100;
                        const F = 100 - R;
                        csvContent += `${t.toFixed(2)},${R.toFixed(4)},${F.toFixed(4)}\n`;
                    }
                }
            }

            // ä¸‹è¼‰CSV
            const blob = new Blob(["\ufeff" + csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement("a");
            const url = URL.createObjectURL(blob);
            link.setAttribute("href", url);
            link.setAttribute("download", `Weibull_åˆ†æ_${mode === 'dual' ? 'é›™çµ„æ¯”å°' : 'å–®çµ„'}_${new Date().toISOString().slice(0, 10)}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);

            alert("âœ… å®Œæ•´æ•¸æ“šå·²æˆåŠŸåŒ¯å‡ºç‚º CSV æª”æ¡ˆ!");
        }

        function exportCharts() {
            if (!analysisResults) {
                alert("âŒ è«‹å…ˆåŸ·è¡Œåˆ†æä»¥ç”¢ç”Ÿåœ–è¡¨!");
                return;
            }

            const mode = analysisResults ? analysisResults.mode : 'unknown';

            // ç¸®å°åœ–è¡¨å°ºå¯¸ï¼Œä½¿æ–‡å­—å’Œåœ–ç¤ºç›¸å°è®Šå¤§ 1.5 å€
            const exportWidth = 800;   // åŒ¯å‡ºå¯¬åº¦
            const exportHeight = 600;  // åŒ¯å‡ºé«˜åº¦
            const scale = 1.5;         // SVG å…§éƒ¨ç¸®æ”¾ï¼Œä½¿å…ƒç´ ç›¸å°è®Šå¤§

            // ä½¿ç”¨ Plotly çš„ SVG åŒ¯å‡ºåŠŸèƒ½
            Plotly.downloadImage('chartProb', {
                format: 'svg',
                width: exportWidth,
                height: exportHeight,
                scale: scale,
                filename: `Weibull_Probability_Plot_${mode === 'dual' ? 'é›™çµ„æ¯”å°' : 'å–®çµ„'}_${new Date().toISOString().slice(0, 10)}`
            });

            setTimeout(() => {
                Plotly.downloadImage('chartRel', {
                    format: 'svg',
                    width: exportWidth,
                    height: exportHeight,
                    scale: scale,
                    filename: `Weibull_å¯é åº¦æ›²ç·š_${mode === 'dual' ? 'é›™çµ„æ¯”å°' : 'å–®çµ„'}_${new Date().toISOString().slice(0, 10)}`
                });
                alert("âœ… å…©å¼µåœ–è¡¨å·²æˆåŠŸåŒ¯å‡ºç‚ºé«˜å“è³ª SVG æª”æ¡ˆï¼\n\nâœ¨ æ–‡å­—å’Œåœ–ç¤ºæ¯”ä¾‹å·²å„ªåŒ–ï¼Œé©åˆå°åˆ·å’Œå°ˆæ¥­å‡ºç‰ˆã€‚");
            }, 1000);
        }

        // å¯é åº¦è¼¸å…¥å³æ™‚æ›´æ–°æ¨™ç¤º
        (function initReliabilityInput() {
            const input = document.getElementById('inputReliability');
            if (!input) return;
            const handler = () => {
                const val = parseFloat(input.value);
                if (isNaN(val) || val <= 0 || val >= 100) return;
                markerReliabilityPercent = val;
                updateReliabilityMarkers(markerReliabilityPercent);
            };
            input.addEventListener('input', handler);
            input.addEventListener('change', handler);
        })();

        function updateReliabilityMarkers(percent) {
            if (!analysisResults || (!analysisResults.groupA && !analysisResults.groupB)) return;
            const R = percent / 100;
            const shapes = [];
            const annotations = [];

            const groupNameA = document.getElementById('groupNameA') ? document.getElementById('groupNameA').value : 'A';
            const groupNameB = document.getElementById('groupNameB') ? document.getElementById('groupNameB').value : 'B';

            // å…ˆç§»é™¤èˆŠçš„æ¨™è¨˜é» traces
            const relDiv = document.getElementById('chartRel');
            if (relDiv && relDiv.data) {
                const deleteIdx = [];
                relDiv.data.forEach((tr, i) => {
                    if (tr && (tr.name === '__markerA__' || tr.name === '__markerB__')) deleteIdx.push(i);
                });
                if (deleteIdx.length) Plotly.deleteTraces('chartRel', deleteIdx);
            }

            // A çµ„æ¨™ç¤º
            if (analysisResults.groupA) {
                const tA = analysisResults.groupA.eta * Math.pow(-Math.log(R), 1 / analysisResults.groupA.beta);
                const RA = percent; // ç™¾åˆ†æ¯”åº§æ¨™
                shapes.push({
                    type: 'line', xref: 'x', yref: 'y',
                    x0: tA, x1: tA, y0: 0, y1: 100,
                    line: { color: '#3498db', width: 2, dash: 'dot' }
                });
                annotations.push({
                    x: tA, y: 80, xref: 'x', yref: 'y',
                    text: `${groupNameA}: R=${percent}% â†’ t=${tA.toFixed(2)}`,
                    showarrow: false, font: { size: 11, color: '#1f78b4' },
                    bgcolor: 'rgba(52,152,219,0.15)', bordercolor: '#3498db', borderwidth: 1
                });
                Plotly.addTraces('chartRel', [{
                    x: [tA], y: [RA], mode: 'markers', type: 'scatter',
                    name: '__markerA__', showlegend: false, hoverinfo: 'skip',
                    marker: { size: 8, color: '#3498db', line: { width: 1, color: '#1f78b4' }, symbol: 'circle' }
                }]);
            }

            // B çµ„æ¨™ç¤º
            if (analysisResults.groupB) {
                const tB = analysisResults.groupB.eta * Math.pow(-Math.log(R), 1 / analysisResults.groupB.beta);
                const RB = percent; // ç™¾åˆ†æ¯”åº§æ¨™
                shapes.push({
                    type: 'line', xref: 'x', yref: 'y',
                    x0: tB, x1: tB, y0: 0, y1: 100,
                    line: { color: '#e74c3c', width: 2, dash: 'dot' }
                });
                annotations.push({
                    x: tB, y: 60, xref: 'x', yref: 'y',
                    text: `${groupNameB}: R=${percent}% â†’ t=${tB.toFixed(2)}`,
                    showarrow: false, font: { size: 11, color: '#c0392b' },
                    bgcolor: 'rgba(231,76,60,0.15)', bordercolor: '#e74c3c', borderwidth: 1
                });
                Plotly.addTraces('chartRel', [{
                    x: [tB], y: [RB], mode: 'markers', type: 'scatter',
                    name: '__markerB__', showlegend: false, hoverinfo: 'skip',
                    marker: { size: 8, color: '#e74c3c', line: { width: 1, color: '#c0392b' }, symbol: 'circle' }
                }]);
            }

            Plotly.relayout('chartRel', { shapes, annotations });
        }

        // ========== ç¬¬å››éšæ®µï¼šå ±å‘Šç”ŸæˆåŠŸèƒ½ ==========

        async function generateReport() {
            if (!analysisResults || (!analysisResults.groupA && !analysisResults.groupB)) {
                alert("âŒ è«‹å…ˆåŸ·è¡Œåˆ†æä»¥ç”¢ç”Ÿçµæœï¼");
                return;
            }

            const loadingMsg = document.createElement('div');
            loadingMsg.style.cssText = 'position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,0.8);color:white;padding:20px 40px;border-radius:8px;font-size:1.2em;z-index:9999;';
            loadingMsg.textContent = 'æ­£åœ¨ç”Ÿæˆå ±å‘Šï¼Œè«‹ç¨å€™...';
            document.body.appendChild(loadingMsg);

            try {
                // ä½¿ç”¨ html2canvas æˆªå–å ±å‘Šå€åŸŸï¼ˆç°¡åŒ–ç‰ˆæœ¬ï¼‰
                const reportArea = document.getElementById('reportArea');
                const scale = 4; // ä½¿ç”¨ 4 å€è§£æåº¦

                const canvas = await html2canvas(reportArea, {
                    scale: scale,
                    useCORS: true,
                    backgroundColor: '#ffffff',
                    logging: false,
                    allowTaint: true,
                    windowWidth: reportArea.scrollWidth,
                    windowHeight: reportArea.scrollHeight,
                    onclone: (clonedDoc) => {
                        const canvases = clonedDoc.querySelectorAll('canvas');
                        canvases.forEach(canvas => {
                            canvas.getContext('2d', { willReadFrequently: true });
                        });
                    }
                });

                // æ·»åŠ é‚Šè·
                const padding = 40 * scale;
                const finalCanvas = document.createElement('canvas');
                finalCanvas.width = canvas.width + padding * 2;
                finalCanvas.height = canvas.height + padding * 2;
                const ctx = finalCanvas.getContext('2d');

                // ç™½è‰²èƒŒæ™¯
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(0, 0, finalCanvas.width, finalCanvas.height);

                // ç¹ªè£½å…§å®¹
                ctx.drawImage(canvas, padding, padding);

                // ä¸‹è¼‰
                finalCanvas.toBlob((blob) => {
                    const link = document.createElement('a');
                    link.href = URL.createObjectURL(blob);
                    const timestamp = new Date().toISOString().slice(0, 19).replace(/:/g, '-');
                    const mode = analysisResults.mode === 'dual' ? 'é›™çµ„æ¯”å°' : 'å–®çµ„';
                    link.download = `Weibull_åˆ†æå ±å‘Š_${mode}_${timestamp}.png`;
                    link.click();
                    document.body.removeChild(loadingMsg);
                    alert(`âœ… å ±å‘Šå·²æˆåŠŸç”Ÿæˆï¼\nè§£æåº¦: ${finalCanvas.width} Ã— ${finalCanvas.height} px`);
                }, 'image/png', 1.0);
            } catch (error) {
                document.body.removeChild(loadingMsg);
                alert("âŒ å ±å‘Šç”Ÿæˆå¤±æ•—: " + error.message);
                console.error(error);
            }
        }

        // ========== ç¬¬äº”éšæ®µï¼šç†è«–æŒ‡å—åŠŸèƒ½ï¼ˆå·²æ·»åŠ ï¼‰==========
        function openTheory() {
            document.getElementById('theoryModal').style.display = 'block';
        }

        function closeTheory() {
            document.getElementById('theoryModal').style.display = 'none';
        }
    </script>

    <!-- ========== ç†è«–æŒ‡å—å½ˆçª— HTML çµæ§‹ (å·²ç¾åŒ–)========== -->
    <div id="theoryModal" class="batch-modal">
        <div class="batch-modal-content" style="max-width: 900px;">
            <div class="batch-modal-header">ğŸ“˜ Weibull åˆ†æç†è«–æŒ‡å—</div>
            <div style="max-height: 70vh; overflow-y: auto;">
                <div style="text-align: center; margin-bottom: 15px;">
                    <span
                        style="display: inline-block; background: linear-gradient(135deg, #3498db, #2980b9); color: white; padding: 8px 16px; border-radius: 20px; font-size: 0.9em; font-weight: bold;">å°ˆæ¥­å·¥ç¨‹æŒ‡å—
                        â€¢ å¯é åº¦åˆ†æå¿…å‚™</span>
                </div>
                <h2>1. æ•¸æ“šé¡å‹ï¼šå¤±æ•ˆèˆ‡å³è¨­é™</h2>
                <p>åœ¨å¯é åº¦æ¸¬è©¦ä¸­ï¼Œæˆ‘å€‘æœƒé‡åˆ°å…©ç¨®æ•¸æ“šé¡å‹ï¼š</p>

                <h3>å¤±æ•ˆæ•¸æ“š (Failure, F)</h3>
                <div class="calculation-example" style="background-color: #e8f8f5; border-color: #27ae60;">
                    <p>ç”¢å“åœ¨æ¸¬è©¦æœŸé–“<strong class="highlight-text">ç¢ºå¯¦ç™¼ç”Ÿå¤±æ•ˆ</strong>çš„æ•¸æ“šé»ã€‚ä¾‹å¦‚ï¼šç”¢å“åœ¨é‹ä½œ 300 å°æ™‚å¾Œæå£ã€‚é€™æ˜¯æœ€ç›´æ¥ã€æœ€æœ‰åƒ¹å€¼çš„æ•¸æ“šã€‚</p>
                </div>

                <h3>å³è¨­é™æ•¸æ“š (Suspended/Censored, S)</h3>
                <div class="calculation-example" style="background-color: #f8f9fa; border-color: #495057;">
                    <p><strong>å³è¨­é™</strong>æ˜¯æŒ‡ç”¢å“åœ¨æ¸¬è©¦çµæŸæ™‚<strong
                            class="highlight-text">ä»ç„¶æ­£å¸¸é‹ä½œ</strong>ï¼Œæˆ‘å€‘åªçŸ¥é“å®ƒã€Œè‡³å°‘ã€å­˜æ´»äº†é€™éº¼ä¹…ï¼Œä½†ä¸çŸ¥é“å¯¦éš›å£½å‘½ã€‚</p>

                    <div class="calculation-example" style="background-color: #fff3e0; border-color: #ffb74d;">
                        <h3>ğŸ” ç‚ºä»€éº¼æœƒæœ‰å³è¨­é™æ•¸æ“šï¼Ÿ</h3>
                        <ul>
                            <li>ğŸ§ª <strong>æ¸¬è©¦æ™‚é–“é™åˆ¶ï¼š</strong>ç”¢å“æ¸¬è©¦ 500 å°æ™‚å¾ŒçµæŸï¼Œä½†æœ‰äº›æ¨£å“é‚„æ²’å£ â†’ è¨˜éŒ„ç‚ºã€Œ500 å°æ™‚ï¼Œè¨­é™ (S)ã€</li>
                            <li>ğŸ”„ <strong>æ¨£å“ç§»é™¤ï¼š</strong>æ¸¬è©¦ä¸­é€”å› å…¶ä»–åŸå› ï¼ˆéå¤±æ•ˆï¼‰ç§»é™¤æ¨£å“ï¼Œä¾‹å¦‚é€å»åšå…¶ä»–æª¢æ¸¬</li>
                            <li>ğŸ’° <strong>æˆæœ¬è€ƒé‡ï¼š</strong>é•·æ™‚é–“æ¸¬è©¦æˆæœ¬é«˜ï¼Œç„¡æ³•ç­‰åˆ°æ‰€æœ‰æ¨£å“éƒ½å¤±æ•ˆ</li>
                        </ul>
                        <div
                            style="background: linear-gradient(135deg, #fff3cd, #ffe082); border-left: 4px solid #ffc107; padding: 10px; border-radius: 5px; margin-top: 10px;">
                            <strong>ğŸ’¡ é‡è¦ï¼š</strong>å³è¨­é™æ•¸æ“šé›–ç„¶æ²’æœ‰å¤±æ•ˆï¼Œä½†ä»ç„¶æä¾›äº†ã€Œç”¢å“è‡³å°‘èƒ½æ´»é€™éº¼ä¹…ã€çš„è³‡è¨Šï¼Œå°æ–¼æå‡åˆ†ææº–ç¢ºåº¦éå¸¸æœ‰å¹«åŠ©ï¼
                        </div>
                    </div>

                    <h3>ğŸ“Š å¯¦éš›ç¯„ä¾‹</h3>
                    <div class="calculation-example" style="background-color: #e3f2fd; border-color: #2196f3;">
                        <p>å‡è¨­æ¸¬è©¦ 5 å€‹ç”¢å“ï¼Œæ¸¬è©¦æ™‚é–“ä¸Šé™ 600 å°æ™‚ï¼š</p>
                        <div style="background: white; border-radius: 8px; padding: 15px; margin: 10px 0;">
                            <div
                                style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; text-align: center;">
                                <div
                                    style="background: #e8f5e9; padding: 10px; border-radius: 5px; border: 2px solid #27ae60;">
                                    <strong>ç”¢å“ A</strong><br>
                                    ğŸ• 300 å°æ™‚å¤±æ•ˆ â†’ <strong>300, F</strong>
                                </div>
                                <div
                                    style="background: #e8f5e9; padding: 10px; border-radius: 5px; border: 2px solid #27ae60;">
                                    <strong>ç”¢å“ B</strong><br>
                                    ğŸ• 450 å°æ™‚å¤±æ•ˆ â†’ <strong>450, F</strong>
                                </div>
                                <div
                                    style="background: #fff3e0; padding: 10px; border-radius: 5px; border: 2px solid #ffc107;">
                                    <strong>ç”¢å“ C</strong><br>
                                    âœ… 600 å°æ™‚ä»æ­£å¸¸ â†’ <strong>600, S</strong> (å³è¨­é™)
                                </div>
                                <div
                                    style="background: #e8f5e9; padding: 10px; border-radius: 5px; border: 2px solid #27ae60;">
                                    <strong>ç”¢å“ D</strong><br>
                                    ğŸ• 550 å°æ™‚å¤±æ•ˆ â†’ <strong>550, F</strong>
                                </div>
                                <div
                                    style="background: #fff3e0; padding: 10px; border-radius: 5px; border: 2px solid #ffc107;">
                                    <strong>ç”¢å“ E</strong><br>
                                    âœ… 600 å°æ™‚ä»æ­£å¸¸ â†’ <strong>600, S</strong> (å³è¨­é™)
                                </div>
                            </div>
                        </div>
                        <p style="text-align: center; margin-top: 10px; font-weight: bold;">âœ… é€™æ¨£çš„æ•¸æ“šçµ„åˆå¯ä»¥é€²è¡Œ Weibull
                            åˆ†æï¼Œå³è¨­é™æ•¸æ“šæœƒè¢«æ­£ç¢ºç´å…¥è¨ˆç®—ã€‚</p>
                    </div>

                    <!-- æ–°å¢å€å¡Šï¼šR(t) èˆ‡ F(t) çš„é—œä¿‚ -->
                    <h2>1.5 ğŸ“ˆ å¯é åº¦èˆ‡ä¸å¯é åº¦çš„é—œä¿‚</h2>
                    <div class="calculation-example" style="background-color: #e8f8f5; border-color: #27ae60;">
                        <p>åœ¨å·¥ç¨‹å¯¦å‹™ä¸­ï¼Œç”¢å“çš„ç‹€æ…‹æ˜¯ä¸€é«”å…©é¢çš„ï¼šä¸æ˜¯ã€Œå­˜æ´»ã€å°±æ˜¯ã€Œå·²å¤±æ•ˆã€ã€‚å› æ­¤æˆ‘å€‘å®šç¾©äº†äº’è£œçš„å…©å€‹æŒ‡æ¨™ï¼š</p>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
                            <div
                                style="background: linear-gradient(135deg, #e8f5e9, #c8e6c9); padding: 15px; border-radius: 8px; border: 2px solid #27ae60;">
                                <h4 style="margin: 0 0 10px 0; color: #1b5e20;">ğŸŸ¢ \(R(t)\) å¯é åº¦ (Reliability)</h4>
                                <p style="margin: 5px 0;"><strong>é€šä¿—åç¨±ï¼š</strong><span class="highlight-text">å­˜æ´»ç‡
                                        (Survival Rate)</span></p>
                                <p style="margin: 5px 0;"><strong>å®šç¾©ï¼š</strong>ä»£è¡¨ç”¢å“é‹ä½œåˆ°æ™‚é–“ \(t\) <strong>ä»æœªæå£</strong>çš„æ©Ÿç‡ã€‚
                                </p>
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #ffebee, #ffcdd2); padding: 15px; border-radius: 8px; border: 2px solid #e74c3c;">
                                <h4 style="margin: 0 0 10px 0; color: #b71c1c;">ğŸ”´ \(F(t)\) ä¸å¯é åº¦ (Unreliability)</h4>
                                <p style="margin: 5px 0;"><strong>é€šä¿—åç¨±ï¼š</strong><span class="highlight-text">ç´¯ç©å¤±æ•ˆæ©Ÿç‡
                                        (Cumulative Probability of Failure)</span></p>
                                <p style="margin: 5px 0;"><strong>å®šç¾©ï¼š</strong>ä»£è¡¨ç”¢å“å¾é–‹å§‹é‹ä½œç›´åˆ°æ™‚é–“ \(t\)
                                    <strong>å·²ç¶“æå£</strong>çš„ç¸½æ¯”ä¾‹ï¼ˆå³ CDFï¼‰ã€‚
                                </p>
                            </div>
                        </div>

                        <div class="formula-box">
                            $$ R(t) + F(t) = 1 $$
                            <p style="font-size: 0.8em; color: #555; margin-top: 5px; text-align: center;">ğŸŸ¢ (å­˜æ´»ç‡) + ğŸ”´
                                (ç´¯ç©å¤±æ•ˆæ©Ÿç‡) = 100%</p>
                        </div>
                    </div>

                    <h2>2. ğŸ§® æ ¸å¿ƒå…¬å¼</h2>
                    <div class="calculation-example" style="background-color: #fff3cd; border-color: #ffc107;">
                        <p>Weibull åˆ†ä½ˆçš„ <strong class="highlight-text">å¯é åº¦å‡½æ•¸ (Reliability Function) \(R(t)\)</strong>
                            å…¬å¼å¦‚ä¸‹ï¼š</p>

                        <div class="formula-box">
                            $$ R(t) = e^{-(t/\eta)^\beta} $$
                            <p style="font-size: 0.85em; color: #555; margin-top: 8px; text-align: center;">ğŸ’¡ é€™æ˜¯
                                Weibull åˆ†ä½ˆçš„æ ¸å¿ƒï¼Œæ‰€æœ‰è¨ˆç®—éƒ½åŸºæ–¼æ­¤å…¬å¼</p>
                        </div>

                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 15px;">
                            <div
                                style="background: white; padding: 10px; border-radius: 5px; border: 2px solid #27ae60;">
                                <strong>ğŸŸ¢ \(t\)</strong>ï¼šå£½å‘½ï¼ˆæˆ–è¡Œé§›é‡Œç¨‹ã€å¾ªç’°æ¬¡æ•¸ï¼‰ã€‚
                            </div>
                            <div
                                style="background: white; padding: 10px; border-radius: 5px; border: 2px solid #27ae60;">
                                <strong>ğŸŸ¢ \(R(t)\)</strong>ï¼šåœ¨æ™‚é–“ \(t\) æ™‚ï¼Œç”¢å“å°šæœªå¤±æ•ˆçš„æ©Ÿç‡ï¼ˆå¯é åº¦ï¼‰ã€‚
                            </div>
                            <div
                                style="background: white; padding: 10px; border-radius: 5px; border: 2px solid #2980b9;">
                                <strong>ğŸ”µ \(\beta\) (Beta)</strong>ï¼šå½¢ç‹€åƒæ•¸ (Shape Parameter)ï¼Œæ±ºå®šå¤±æ•ˆæ¨¡å¼ã€‚
                            </div>
                            <div
                                style="background: white; padding: 10px; border-radius: 5px; border: 2px solid #e67e22;">
                                <strong>ğŸŸ  \(\eta\) (Eta)</strong>ï¼šå°ºåº¦åƒæ•¸ (Scale Parameter)ï¼Œåˆç¨±ç‰¹å¾µå£½å‘½ã€‚
                            </div>
                        </div>
                    </div>

                    <h2>3. ğŸ¯ ç†è§£é—œéµåƒæ•¸</h2>
                    <div class="calculation-example" style="background-color: #f8f9fa; border-color: #495057;">
                        <p>åœ¨ä»£å…¥å…¬å¼å‰ï¼Œå¿…é ˆå…ˆé€éæ•¸æ“šæ“¬åˆæ±‚å‡º \(\beta\) å’Œ \(\eta\)ã€‚</p>

                        <h3>ğŸ“Š \(\beta\) (å½¢ç‹€åƒæ•¸)ï¼šæ±ºå®šå¤±æ•ˆé¡å‹</h3>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 15px 0;">
                            <div
                                style="background: linear-gradient(135deg, #ffebee, #ffcdd2); padding: 15px; border-radius: 8px; border: 2px solid #e74c3c;">
                                <h4 style="margin: 0 0 8px 0; color: #7f1d1d;">ğŸ”´ \(\beta < 1\)</h4>
                                        <p style="margin: 0; font-size: 0.95em;"><strong>æ—©æœŸå¤±æ•ˆæœŸ</strong> (Infant
                                            Mortality)<br>ç”¢å“å‰›å‡ºå» å°±å£ï¼Œé€šå¸¸æ˜¯ç”Ÿç”¢ç‘•ç–µã€‚</p>
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #e3f2fd, #bbdefb); padding: 15px; border-radius: 8px; border: 2px solid #2196f3;">
                                <h4 style="margin: 0 0 8px 0; color: #15559a;">ğŸ”µ \(\beta = 1\)</h4>
                                <p style="margin: 0; font-size: 0.95em;"><strong>éš¨æ©Ÿå¤±æ•ˆæœŸ</strong> (Random
                                    Failures)<br>å¤±æ•ˆå¾‹æ˜¯å¸¸æ•¸ï¼Œé¡ä¼¼æŒ‡æ•¸åˆ†ä½ˆã€‚</p>
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #e8f5e9, #c8e6c9); padding: 15px; border-radius: 8px; border: 2px solid #27ae60;">
                                <h4 style="margin: 0 0 8px 0; color: #1b5e20;">ğŸŸ¢ \(\beta > 1\)</h4>
                                <p style="margin: 0; font-size: 0.95em;"><strong>ç£¨è€—å¤±æ•ˆæœŸ</strong>
                                    (Wear-out)<br>ç”¢å“è€åŒ–ã€ç–²å‹ï¼Œå¤±æ•ˆå¾‹éš¨æ™‚é–“ä¸Šå‡ã€‚</p>
                            </div>
                        </div>

                        <h3>â±ï¸ \(\eta\) (å°ºåº¦åƒæ•¸)ï¼šç‰¹å¾µå£½å‘½</h3>
                        <div
                            style="background: linear-gradient(135deg, #fff3e0, #ffe0b2); padding: 15px; border-radius: 8px; border: 2px solid #ff9800; margin: 15px 0;">
                            <p>ä»£è¡¨ç•¶ <strong style="color: #d84315;">63.2%</strong> çš„ç”¢å“å·²ç¶“å¤±æ•ˆæ™‚çš„æ™‚é–“é»ï¼ˆæ­¤æ™‚ \(R(t) =
                                36.8\%\)ï¼‰ã€‚é€™æ˜¯è¡¡é‡ç”¢å“å£½å‘½é•·çŸ­çš„ä¸»è¦æŒ‡æ¨™ã€‚</p>
                        </div>

                        <h3>ğŸ“ \(R^2\) (æ“¬åˆåº¦)ï¼šæ•¸æ“šå¯ä¿¡åº¦æŒ‡æ¨™</h3>
                        <div class="formula-box">
                            <p><strong>æ“¬åˆåº¦ (R-squared, RÂ²)</strong> æ˜¯ç”¨ä¾†è©•ä¼° Weibull æ¨¡å‹èˆ‡å¯¦éš›æ•¸æ“šçš„å»åˆç¨‹åº¦ï¼Œæ•¸å€¼ç¯„åœç‚º 0 åˆ° 1ã€‚</p>
                        </div>

                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin: 15px 0;">
                            <div
                                style="background: linear-gradient(135deg, #e8f5e9, #c8e6c9); padding: 15px; border-radius: 8px; border: 2px solid #27ae60;">
                                <h4 style="margin: 0 0 8px 0; color: #1b5e20;">ğŸŸ¢ \(R^2 \geq 0.95\)</h4>
                                <p style="margin: 0; font-size: 0.95em;"><strong>å„ªç§€æ“¬åˆ</strong><br>æ•¸æ“šéå¸¸ç¬¦åˆ Weibull
                                    åˆ†ä½ˆï¼Œåˆ†æçµæœé«˜åº¦å¯ä¿¡ã€‚</p>
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #e3f2fd, #bbdefb); padding: 15px; border-radius: 8px; border: 2px solid #2196f3;">
                                <h4 style="margin: 0 0 8px 0; color: #15559a;">ğŸ”µ \(0.90 \leq R^2 < 0.95\)</h4>
                                        <p style="margin: 0; font-size: 0.95em;">
                                            <strong>è‰¯å¥½æ“¬åˆ</strong><br>çµæœå¯æ¥å—ï¼Œä½†å¯èƒ½å­˜åœ¨å°‘é‡ç•°å¸¸æ•¸æ“šã€‚
                                        </p>
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #fff3e0, #ffe0b2); padding: 15px; border-radius: 8px; border: 2px solid #ff9800;">
                                <h4 style="margin: 0 0 8px 0; color: #d84315;">ğŸŸ  \(0.80 \leq R^2 < 0.90\)</h4>
                                        <p style="margin: 0; font-size: 0.95em;">
                                            <strong>å°šå¯æ“¬åˆ</strong><br>å»ºè­°æª¢æŸ¥æ•¸æ“šå“è³ªæˆ–è€ƒæ…®å…¶ä»–åˆ†ä½ˆæ¨¡å‹ã€‚
                                        </p>
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #ffebee, #ffcdd2); padding: 15px; border-radius: 8px; border: 2px solid #e74c3c;">
                                <h4 style="margin: 0 0 8px 0; color: #7f1d1d;">ğŸ”´ \(R^2 < 0.80\)</h4>
                                        <p style="margin: 0; font-size: 0.95em;"><strong>æ“¬åˆä¸ä½³</strong><br>æ•¸æ“šå¯èƒ½ä¸ç¬¦åˆ
                                            Weibull åˆ†ä½ˆï¼Œæˆ–å­˜åœ¨åš´é‡ç•°å¸¸å€¼ã€‚</p>
                            </div>
                        </div>

                        <div
                            style="background: linear-gradient(135deg, #fff3cd, #ffe082); border-left: 4px solid #ffc107; padding: 15px; border-radius: 8px; margin: 15px 0;">
                            <strong>âš ï¸ æ³¨æ„ï¼š</strong>å¦‚æœ \(R^2\) éä½ï¼Œå»ºè­°é‡æ–°æª¢è¦–æ•¸æ“šä¾†æºã€æ¸¬è©¦æ¢ä»¶æ˜¯å¦ä¸€è‡´ï¼Œæˆ–è€ƒæ…®ä½¿ç”¨å°æ•¸å¸¸æ…‹åˆ†ä½ˆç­‰å…¶ä»–æ¨¡å‹ã€‚
                        </div>
                    </div>

                    <h2>4. ğŸ“ è¨ˆç®—æ­¥é©Ÿå¯¦ä¾‹</h2>
                    <div class="calculation-example" style="background-color: #e3f2fd; border-color: #2196f3;">
                        <p>å‡è¨­ä½ åˆ†æä¸€çµ„æ•¸æ“šå¾Œå¾—åˆ°åƒæ•¸ï¼š<strong class="highlight-text">\(\beta = 2.5\)</strong> (ç£¨è€—å‹) èˆ‡ <strong
                                class="highlight-text">\(\eta = 1000\) å°æ™‚</strong>ã€‚</p>
                    </div>

                    <div class="calculation-example" style="background-color: #e8f8f5; border-color: #27ae60;">
                        <h3>ğŸ”¢ æƒ…å¢ƒ Aï¼šè¨ˆç®—ç‰¹å®šæ™‚é–“çš„å¯é åº¦</h3>
                        <div
                            style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #27ae60; margin: 10px 0;">
                            <p><strong>â“ å•é¡Œï¼š</strong>ç”¢å“é‹ä½œ <strong>500 å°æ™‚</strong> å¾Œï¼Œé‚„å­˜æ´»çš„æ©Ÿç‡æ˜¯å¤šå°‘ï¼Ÿ</p>
                            <div class="formula-box" style="margin: 15px 0;">
                                <h4 style="margin: 0 0 10px 0;">ä»£å…¥å…¬å¼ï¼š</h4>
                                $$ R(500) = e^{-(500/1000)^{2.5}} $$
                                $$ R(500) = e^{-(0.5)^{2.5}} = e^{-0.1768} \approx 0.838 $$
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #e8f5e9, #c8e6c9); padding: 10px; border-radius: 5px; border: 2px solid #27ae60; text-align: center;">
                                <strong>âœ… ç­”æ¡ˆï¼š</strong> å¯é åº¦ç‚º <strong style="color: #1b5e20;">83.8%</strong>ã€‚
                            </div>
                        </div>
                    </div>

                    <div class="calculation-example" style="background-color: #fff3cd; border-color: #ffc107;">
                        <h3>ğŸ¯ æƒ…å¢ƒ Bï¼šè¨ˆç®— B10 å£½å‘½ (B10 Life)</h3>
                        <div
                            style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #ffc107; margin: 10px 0;">
                            <p><strong>â“ å•é¡Œï¼š</strong>å¤šå°‘æ™‚é–“å¾Œï¼Œæœƒæœ‰ 10% çš„ç”¢å“å¤±æ•ˆï¼ˆå³ 90% å¯é åº¦ï¼‰ï¼Ÿ</p>
                            <div class="formula-box" style="margin: 15px 0;">
                                <h4 style="margin: 0 0 10px 0;">å…¬å¼è®Šå½¢ï¼š</h4>
                                $$ t = \eta \times (-\ln(R))^{1/\beta} $$
                                $$ t = 1000 \times (-\ln(0.9))^{1/2.5} $$
                                $$ t = 1000 \times (0.10536)^{0.4} $$
                                $$ t \approx 1000 \times 0.406 = 406 \text{ å°æ™‚} $$
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #fff3e0, #ffe0b2); padding: 10px; border-radius: 5px; border: 2px solid #ff9800; text-align: center;">
                                <strong>âœ… ç­”æ¡ˆï¼š</strong> B10 å£½å‘½ç‚º <strong style="color: #d84315;">406 å°æ™‚</strong>ã€‚
                            </div>
                        </div>
                    </div>

                    <h2>4. ğŸ¯ B-Life æ¦‚å¿µèˆ‡å·¥ç¨‹æ„ç¾©</h2>
                    <div class="calculation-example" style="background-color: #f8f9fa; border-color: #495057;">
                        <p>åœ¨å¯é åº¦å·¥ç¨‹ï¼ˆç‰¹åˆ¥æ˜¯ Weibull åˆ†æï¼‰ä¸­ï¼Œã€ŒBã€ ä»£è¡¨ Basic Lifeï¼ˆåŸºæœ¬å£½å‘½ï¼‰ï¼Œå¾Œé¢çš„æ•¸å­—ä»£è¡¨ ç´¯ç©å¤±æ•ˆç™¾åˆ†æ¯”ã€‚ç°¡å–®ä¾†èªªï¼ŒBx å£½å‘½å°±æ˜¯ï¼šã€Œç•¶ x%
                            çš„ç”¢å“å¤±æ•ˆæ™‚ï¼Œæ‰€ç¶“éçš„æ™‚é–“ã€ã€‚ä»¥ä¸‹æ˜¯ B1ã€B10ã€B63.2 çš„è©³ç´°å®šç¾©èˆ‡å®ƒå€‘åœ¨å·¥ç¨‹ä¸Šçš„æ„ç¾©ï¼š</p>
                    </div>

                    <h3>1. ğŸš— B10 å£½å‘½ (B10 Life) â€”â€” è¡Œæ¥­é€šç”¨æ¨™æº–</h3>
                    <div class="calculation-example" style="background-color: #e8f8f5; border-color: #2ecc71;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div
                                style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #27ae60;">
                                <h4 style="margin: 0 0 8px 0; color: #1b5e20;">ğŸ“ å®šç¾©</h4>
                                <p><strong>ç•¶ 10% çš„ç”¢å“å¤±æ•ˆ</strong>ï¼ˆä¹Ÿå°±æ˜¯é‚„æœ‰ 90% å­˜æ´»ï¼‰çš„æ™‚é–“é»ã€‚</p>
                            </div>
                            <div
                                style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #27ae60;">
                                <h4 style="margin: 0 0 8px 0; color: #1b5e20;">ğŸ”¢ æ•¸å­¸æ„ç¾©</h4>
                                <p>å¯é åº¦ \(R(t) = 90\%\) æˆ– \(0.9\)ã€‚</p>
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #e3f2fd, #bbdefb); padding: 15px; border-radius: 8px; border: 2px solid #2196f3; grid-column: 1 / -1;">
                                <h4 style="margin: 0 0 8px 0; color: #15559a;">ğŸ­ æ‡‰ç”¨å ´æ™¯</h4>
                                <p>é€™æ˜¯æ±½è»Šæ¥­ã€è»¸æ‰¿æ¥­ã€é¦¬é”æ¥­æœ€å¸¸ç”¨çš„æŒ‡æ¨™ã€‚é€šå¸¸ç”¨ä¾†è¨­å®š <strong>ä¿å›ºæœŸ (Warranty)</strong>ã€‚</p>
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #fff3e0, #ffe0b2); padding: 15px; border-radius: 8px; border: 2px solid #ff9800; grid-column: 1 / -1;">
                                <h4 style="margin: 0 0 8px 0; color: #d84315;">ğŸ’¼ å¯¦éš›ä¾‹å­</h4>
                                <p>å¦‚æœè»Šå» ç®—å‡ºæŸé›¶ä»¶çš„ B10 å£½å‘½æ˜¯ 3å¹´ï¼Œä»£è¡¨ 3å¹´å…§é è¨ˆæœƒæœ‰ 10% çš„è»Šå›ä¾†ç¶­ä¿®ï¼Œé€™æœ‰åŠ©æ–¼è¨ˆç®—ä¿å›ºæˆæœ¬ã€‚</p>
                            </div>
                        </div>
                    </div>

                    <h3>2. âœˆï¸ B1 å£½å‘½ (B1 Life) â€”â€” é«˜å®‰å…¨æ¨™æº–</h3>
                    <div class="calculation-example" style="background-color: #f8f9fa; border-color: #495057;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div
                                style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #495057;">
                                <h4 style="margin: 0 0 8px 0; color: #2c3e50;">ğŸ“ å®šç¾©</h4>
                                <p><strong>ç•¶ 1% çš„ç”¢å“å¤±æ•ˆ</strong>ï¼ˆä¹Ÿå°±æ˜¯é‚„æœ‰ 99% å­˜æ´»ï¼‰çš„æ™‚é–“é»ã€‚</p>
                            </div>
                            <div
                                style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #495057;">
                                <h4 style="margin: 0 0 8px 0; color: #2c3e50;">ğŸ”¢ æ•¸å­¸æ„ç¾©</h4>
                                <p>å¯é åº¦ \(R(t) = 99\%\) æˆ– \(0.99\)ã€‚</p>
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #ffebee, #ffcdd2); padding: 15px; border-radius: 8px; border: 2px solid #e74c3c; grid-column: 1 / -1;">
                                <h4 style="margin: 0 0 8px 0; color: #7f1d1d;">ğŸ›¡ï¸ æ‡‰ç”¨å ´æ™¯</h4>
                                <p>ç”¨æ–¼é«˜å®‰å…¨æ€§ã€é«˜å¯é åº¦çš„ç”¢å“ï¼Œå¦‚ <strong>èˆªå¤ªã€é†«ç™‚è¨­å‚™ã€æ±½è»Šå®‰å…¨æ°£å›Š</strong>ã€‚å°æ–¼é€™äº›ç”¢å“ï¼Œ10%
                                    çš„å¤±æ•ˆæ˜¯ä¸å¯æ¥å—çš„ï¼Œå¿…é ˆç¢ºä¿æ¥µå°‘é‡çš„ç”¢å“æœƒåœ¨è©²æ™‚é–“é»å‰å£æ‰ã€‚</p>
                            </div>
                        </div>
                    </div>

                    <h3>3. âš™ï¸ B63.2 (ç‰¹å¾µå£½å‘½ / \(\eta\)) â€”â€” æ•¸å­¸åŸºæº–</h3>
                    <div class="calculation-example" style="background-color: #fff3cd; border-color: #ffc107;">
                        <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 15px;">
                            <div
                                style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #ff9800;">
                                <h4 style="margin: 0 0 8px 0; color: #d84315;">ğŸ“ å®šç¾©</h4>
                                <p><strong>ç•¶ 63.2% çš„ç”¢å“å¤±æ•ˆ</strong>ï¼ˆåªå‰© 36.8% å­˜æ´»ï¼‰çš„æ™‚é–“é»ã€‚</p>
                            </div>
                            <div
                                style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #ff9800;">
                                <h4 style="margin: 0 0 8px 0; color: #d84315;">â“ ç‚ºä»€éº¼æ˜¯ 63.2%ï¼Ÿ</h4>
                                <p>é€™ä¾†è‡ª Weibull çš„å…¬å¼çµæ§‹ã€‚ç•¶æ™‚é–“ \(t\) æ­£å¥½ç­‰æ–¼å°ºåº¦åƒæ•¸ \(\eta\) æ™‚ï¼š</p>
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #fff3e0, #ffe0b2); padding: 15px; border-radius: 8px; border: 2px solid #ff9800; grid-column: 1 / -1;">
                                <h4 style="margin: 0 0 8px 0; color: #d84315;">ğŸ§® æ•¸å­¸æ¨å°</h4>
                                <div class="formula-box" style="margin: 10px 0;">
                                    $$ R(\eta) = e^{-(\eta/\eta)^\beta} = e^{-1} \approx 0.3678 $$
                                    $$ F(t) = 1 - 0.3678 = 0.6322 \text{ (å³ 63.2%)} $$
                                </div>
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #e3f2fd, #bbdefb); padding: 15px; border-radius: 8px; border: 2px solid #2196f3; grid-column: 1 / -1;">
                                <h4 style="margin: 0 0 8px 0; color: #15559a;">ğŸ¯ æ„ç¾©</h4>
                                <p>B63.2 å°±æ˜¯ \(\eta\) (Eta, å°ºåº¦åƒæ•¸)ã€‚å®ƒä»£è¡¨é€™æ‰¹ç”¢å“çš„ã€Œç‰¹å¾µå£½å‘½ã€(Characteristic Life)ã€‚é›–ç„¶ 63%
                                    çš„å¤±æ•ˆç‡è½èµ·ä¾†å¾ˆé«˜ï¼ˆå¤§åŠéƒ½å£äº†ï¼‰ï¼Œä½†å®ƒåœ¨æ•¸å­¸ä¸Šæ˜¯ä¸€å€‹éå¸¸ç©©å®šçš„åŸºæº–é»ï¼Œç”¨ä¾†è¡¡é‡æ•´é«”å£½å‘½çš„é•·çŸ­ã€‚å¦‚æœ \(\eta\) è¶Šå¤§ï¼Œä»£è¡¨ç”¢å“æ•´é«”æ’å¾—è¶Šä¹…ã€‚</p>
                            </div>
                        </div>
                    </div>

                    <h3>ğŸ“Š ç¸½çµæ¯”è¼ƒè¡¨</h3>
                    <div
                        style="background: linear-gradient(135deg, #2c3e50, #34495e); padding: 5px; border-radius: 10px; margin: 20px 0;">
                        <table
                            style="width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden;">
                            <thead>
                                <tr style="background: linear-gradient(135deg, #34495e, #2c3e50); color: white;">
                                    <th style="padding: 15px; border: 1px solid #bdc3c7; font-size: 1.1em;">æŒ‡æ¨™</th>
                                    <th style="padding: 15px; border: 1px solid #bdc3c7; font-size: 1.1em;">å¤±æ•ˆæ¯”ä¾‹</th>
                                    <th style="padding: 15px; border: 1px solid #bdc3c7; font-size: 1.1em;">å­˜æ´»ç‡ (å¯é åº¦)
                                    </th>
                                    <th style="padding: 15px; border: 1px solid #bdc3c7; font-size: 1.1em;">æ„ç¾©èˆ‡ç”¨é€”</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="background: linear-gradient(135deg, #ffebee, #ffcdd2);">
                                    <td
                                        style="padding: 12px; border: 1px solid #bdc3c7; text-align: center; font-size: 1.1em;">
                                        <strong style="color: #7f1d1d;">ğŸ”´ B1</strong>
                                    </td>
                                    <td
                                        style="padding: 12px; border: 1px solid #bdc3c7; text-align: center; font-weight: bold;">
                                        1%</td>
                                    <td
                                        style="padding: 12px; border: 1px solid #bdc3c7; text-align: center; font-weight: bold; color: #1b5e20;">
                                        99%</td>
                                    <td style="padding: 12px; border: 1px solid #bdc3c7;">ğŸ›¡ï¸ æ¥µä½é¢¨éšªï¼šç”¨æ–¼é£›æ©Ÿã€é†«ç™‚ã€å®‰å…¨ä»¶ã€‚</td>
                                </tr>
                                <tr style="background: linear-gradient(135deg, #e8f5e9, #c8e6c9);">
                                    <td
                                        style="padding: 12px; border: 1px solid #bdc3c7; text-align: center; font-size: 1.1em;">
                                        <strong style="color: #1b5e20;">ğŸŸ¢ B10</strong>
                                    </td>
                                    <td
                                        style="padding: 12px; border: 1px solid #bdc3c7; text-align: center; font-weight: bold;">
                                        10%</td>
                                    <td
                                        style="padding: 12px; border: 1px solid #bdc3c7; text-align: center; font-weight: bold; color: #1b5e20;">
                                        90%</td>
                                    <td style="padding: 12px; border: 1px solid #bdc3c7;">ğŸ­ å·¥æ¥­æ¨™æº–ï¼šç”¨æ–¼åˆ¶å®šä¿å›ºæœŸã€é¦¬é”å£½å‘½ã€ä¸€èˆ¬é›»å­ç”¢å“ã€‚
                                    </td>
                                </tr>
                                <tr style="background: linear-gradient(135deg, #f3e5f5, #e1bee7);">
                                    <td
                                        style="padding: 12px; border: 1px solid #bdc3c7; text-align: center; font-size: 1.1em;">
                                        <strong style="color: #4a148c;">ğŸŸ£ B50</strong>
                                    </td>
                                    <td
                                        style="padding: 12px; border: 1px solid #bdc3c7; text-align: center; font-weight: bold;">
                                        50%</td>
                                    <td
                                        style="padding: 12px; border: 1px solid #bdc3c7; text-align: center; font-weight: bold; color: #1b5e20;">
                                        50%</td>
                                    <td style="padding: 12px; border: 1px solid #bdc3c7;">âš–ï¸ ä¸­ä½æ•¸å£½å‘½ï¼šä¸€åŠå£äº†ä¸€åŠå¥½çš„æ™‚é–“é» (å¹³å‡å£½å‘½)ã€‚
                                    </td>
                                </tr>
                                <tr style="background: linear-gradient(135deg, #fff3e0, #ffe0b2);">
                                    <td
                                        style="padding: 12px; border: 1px solid #bdc3c7; text-align: center; font-size: 1.1em;">
                                        <strong style="color: #d84315;">ğŸŸ  B63.2</strong>
                                    </td>
                                    <td
                                        style="padding: 12px; border: 1px solid #bdc3c7; text-align: center; font-weight: bold;">
                                        63.2%</td>
                                    <td
                                        style="padding: 12px; border: 1px solid #bdc3c7; text-align: center; font-weight: bold; color: #1b5e20;">
                                        36.8%</td>
                                    <td style="padding: 12px; border: 1px solid #bdc3c7;">âš™ï¸ ç‰¹å¾µå£½å‘½ (\(\eta\))ï¼šWeibull
                                        çš„å°ºåº¦åƒæ•¸ï¼Œæ•¸å­¸ä¸Šçš„åŸºæº–é»ã€‚</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h3>ğŸ’» å¦‚ä½•é€éæˆ‘å€‘å‰›åšçš„ç¶²é è¨ˆç®—ï¼Ÿ</h3>
                    <div class="calculation-example" style="background-color: #e3f2fd; border-color: #2196f3;">
                        <p>åœ¨æˆ‘å€‘çš„ç¶²é å·¥å…·ç®—å‡º \(\beta\) å’Œ \(\eta\) å¾Œï¼Œæ‚¨å¯ä»¥æ‰‹å‹•ç”¨ä»¥ä¸‹å…¬å¼åæ¨é€™äº› B-Lifeï¼š</p>

                        <div class="formula-box" style="margin: 15px 0;">
                            <h4 style="margin: 0 0 10px 0; text-align: center;">ğŸ”„ åæ¨å…¬å¼</h4>
                            $$ t = \eta \times (-\ln(R))^{1/\beta} $$
                        </div>

                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 15px 0;">
                            <div
                                style="background: linear-gradient(135deg, #ffebee, #ffcdd2); padding: 15px; border-radius: 8px; border: 2px solid #e74c3c;">
                                <h4 style="margin: 0 0 8px 0; color: #7f1d1d;">ğŸ”´ ç®— B1</h4>
                                <p style="margin: 0; font-weight: bold;">å°‡ R è¨­ç‚º 0.99</p>
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #e8f5e9, #c8e6c9); padding: 15px; border-radius: 8px; border: 2px solid #27ae60;">
                                <h4 style="margin: 0 0 8px 0; color: #1b5e20;">ğŸŸ¢ ç®— B10</h4>
                                <p style="margin: 0; font-weight: bold;">å°‡ R è¨­ç‚º 0.90</p>
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #fff3e0, #ffe0b2); padding: 15px; border-radius: 8px; border: 2px solid #ff9800;">
                                <h4 style="margin: 0 0 8px 0; color: #d84315;">ğŸŸ  ç®— B63.2</h4>
                                <p style="margin: 0; font-weight: bold;">ç­”æ¡ˆå°±æ˜¯ç¶²é ä¸Šé¡¯ç¤ºçš„ Eta (\(\eta\)) å€¼</p>
                            </div>
                        </div>
                    </div>

                    <h2>5. ğŸ“Š æ¨£æœ¬æ•¸é‡å»ºè­°ï¼šå¤šå°‘é¡†æ‰å¤ ï¼Ÿ</h2>
                    <div class="calculation-example" style="background-color: #f8f9fa; border-color: #495057;">
                        <p>é€²è¡Œå¯é åº¦åˆ†æï¼ˆç‰¹åˆ¥æ˜¯ Weibull åˆ†æï¼‰æ™‚ï¼Œæ¨£æœ¬æ•¸é‡çš„é¸æ“‡æ°¸é æ˜¯<strong
                                class="highlight-text">ã€Œçµ±è¨ˆç²¾ç¢ºåº¦ã€èˆ‡ã€Œæ¸¬è©¦æˆæœ¬/æ™‚é–“ã€ä¹‹é–“çš„æ¬Šè¡¡</strong>ã€‚é›–ç„¶æ•¸å­¸ä¸Šåªéœ€è¦ <strong>2
                                å€‹å¤±æ•ˆé»</strong>å°±èƒ½ç•«å‡ºä¸€æ¢ç·šï¼ˆæ±‚å‡º \(\beta\) å’Œ \(\eta\)ï¼‰ï¼Œä½†åœ¨å·¥ç¨‹å¯¦å‹™ä¸Šï¼Œé€™æ˜¯é é ä¸å¤ çš„ã€‚</p>
                    </div>

                    <h3>ğŸ¯ å»ºè­°çš„æ¨£æœ¬æ•¸é‡ (Rule of Thumb)</h3>
                    <div
                        style="background: linear-gradient(135deg, #2c3e50, #34495e); padding: 5px; border-radius: 10px; margin: 20px 0;">
                        <table
                            style="width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden;">
                            <thead>
                                <tr style="background: linear-gradient(135deg, #34495e, #2c3e50); color: white;">
                                    <th style="padding: 15px; border: 1px solid #bdc3c7; font-size: 1.1em;">æ¨£æœ¬æ•¸é‡</th>
                                    <th style="padding: 15px; border: 1px solid #bdc3c7; font-size: 1.1em;">è©•åƒ¹</th>
                                    <th style="padding: 15px; border: 1px solid #bdc3c7; font-size: 1.1em;">é©ç”¨æƒ…å¢ƒ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="background: linear-gradient(135deg, #ffebee, #ffcdd2);">
                                    <td
                                        style="padding: 12px; border: 1px solid #bdc3c7; text-align: center; font-size: 1.05em;">
                                        <strong style="color: #7f1d1d;">ğŸ”´ 3 - 5 é¡†</strong>
                                    </td>
                                    <td
                                        style="padding: 12px; border: 1px solid #bdc3c7; text-align: center; font-weight: bold; color: #7f1d1d;">
                                        æ¥µä½ (é«˜é¢¨éšª)</td>
                                    <td style="padding: 12px; border: 1px solid #bdc3c7;">ğŸ§ª
                                        åƒ…é©ç”¨æ–¼éå¸¸æ˜‚è²´çš„ç”¢å“ï¼ˆå¦‚è¡›æ˜Ÿã€å¤§å‹æ¨¡å…·ï¼‰æˆ–åˆæ­¥æ‘¸åº•æ¸¬è©¦ã€‚èª¤å·®ç¯„åœæ¥µå¤§ï¼Œåƒ…èƒ½çœ‹å¤§è‡´è¶¨å‹¢ã€‚</td>
                                </tr>
                                <tr style="background: linear-gradient(135deg, #fff3e0, #ffe0b2);">
                                    <td
                                        style="padding: 12px; border: 1px solid #bdc3c7; text-align: center; font-size: 1.05em;">
                                        <strong style="color: #d84315;">ğŸŸ  6 - 10 é¡†</strong>
                                    </td>
                                    <td
                                        style="padding: 12px; border: 1px solid #bdc3c7; text-align: center; font-weight: bold; color: #d84315;">
                                        å‹‰å¼·æ¥å—</td>
                                    <td style="padding: 12px; border: 1px solid #bdc3c7;">ğŸ”§ é©ç”¨æ–¼é–‹ç™¼éšæ®µçš„å¿«é€Ÿé©—è­‰ã€‚å¯ä»¥ç®—å‡ºåƒæ•¸ï¼Œä½†å°æ–¼ B10
                                        å£½å‘½ï¼ˆæ—©æœŸå¤±æ•ˆï¼‰çš„é æ¸¬ä»ä¸å¤ æº–ç¢ºã€‚</td>
                                </tr>
                                <tr style="background: linear-gradient(135deg, #e8f5e9, #c8e6c9);">
                                    <td
                                        style="padding: 12px; border: 1px solid #bdc3c7; text-align: center; font-size: 1.05em;">
                                        <strong style="color: #1b5e20;">ğŸŸ¢ 10 - 20 é¡†</strong>
                                    </td>
                                    <td
                                        style="padding: 12px; border: 1px solid #bdc3c7; text-align: center; font-weight: bold; color: #1b5e20;">
                                        å·¥ç¨‹æ¨è–¦ (ç”œèœœé»)</td>
                                    <td style="padding: 12px; border: 1px solid #bdc3c7;">ğŸ­
                                        å¤§å¤šæ•¸å·¥æ¥­æ¨™æº–çš„é¸æ“‡ã€‚åœ¨æˆæœ¬èˆ‡ç²¾ç¢ºåº¦ä¹‹é–“å–å¾—æœ€ä½³å¹³è¡¡ï¼Œè¶³ä»¥åˆ¤æ–·å¤±æ•ˆæ¨¡å¼ (\(\beta\)) ä¸¦ä¼°ç®— B10 å£½å‘½ã€‚</td>
                                </tr>
                                <tr style="background: linear-gradient(135deg, #e3f2fd, #bbdefb);">
                                    <td
                                        style="padding: 12px; border: 1px solid #bdc3c7; text-align: center; font-size: 1.05em;">
                                        <strong style="color: #15559a;">ğŸ”µ 20 - 30 é¡†+</strong>
                                    </td>
                                    <td
                                        style="padding: 12px; border: 1px solid #bdc3c7; text-align: center; font-weight: bold; color: #15559a;">
                                        çµ±è¨ˆé¡¯è‘—</td>
                                    <td style="padding: 12px; border: 1px solid #bdc3c7;">ğŸš€
                                        é©ç”¨æ–¼é«˜å¯é åº¦è¦æ±‚ï¼ˆå¦‚è»Šè¦ã€é†«ç™‚ã€èˆªå¤ªï¼‰æˆ–ä½æˆæœ¬å…ƒä»¶ã€‚èƒ½æä¾›è¼ƒçª„çš„ä¿¡è³´å€é–“ã€‚</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h3>ğŸ” ç‚ºä»€éº¼ï¼Ÿ(èƒŒå¾Œçš„çµ±è¨ˆåŸå› )</h3>

                    <div class="calculation-example" style="background-color: #e8f8f5; border-color: #27ae60;">
                        <h3>ğŸ“Š A. ä¿¡è³´å€é–“ (Confidence Bounds) çš„å¯¬åº¦</h3>
                        <p>Weibull åˆ†æç®—å‡ºçš„åªæ˜¯ã€Œä¼°è¨ˆå€¼ã€ã€‚æ¨£æœ¬è¶Šå°‘ï¼Œä¸ç¢ºå®šæ€§ï¼ˆä¿¡è³´å€é–“ï¼‰å°±è¶Šå¯¬ã€‚</p>
                        <div class="formula-box" style="margin: 15px 0;">
                            <h4 style="margin: 0 0 10px 0;">ğŸ’¡ å¯¦éš›ä¾‹å­ï¼š</h4>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                <div
                                    style="background: linear-gradient(135deg, #ffebee, #ffcdd2); padding: 15px; border-radius: 8px; border: 2px solid #e74c3c;">
                                    <h5 style="margin: 0 0 8px 0; color: #7f1d1d;">ğŸ”´ 5 é¡†æ¨£å“ï¼š</h5>
                                    <p style="margin: 0;"><strong>ç®—å‡º B10 å£½å‘½ï¼š</strong>500 å°æ™‚<br>
                                        <strong>90% ä¿¡è³´å€é–“ï¼š</strong>[100 å°æ™‚, 2500 å°æ™‚]<br>
                                        <strong>å•é¡Œï¼š</strong>é€™ç¯„åœå¤§åˆ°å¹¾ä¹ç„¡æ³•åšæ±ºç­–
                                    </p>
                                </div>
                                <div
                                    style="background: linear-gradient(135deg, #e8f5e9, #c8e6c9); padding: 15px; border-radius: 8px; border: 2px solid #27ae60;">
                                    <h5 style="margin: 0 0 8px 0; color: #1b5e20;">ğŸŸ¢ 20 é¡†æ¨£å“ï¼š</h5>
                                    <p style="margin: 0;"><strong>ç®—å‡º B10 å£½å‘½ï¼š</strong>500 å°æ™‚<br>
                                        <strong>90% ä¿¡è³´å€é–“ï¼š</strong>[400 å°æ™‚, 650 å°æ™‚]<br>
                                        <strong>çµæœï¼š</strong>é€™æ•¸æ“šå°±å¾ˆæœ‰åƒè€ƒåƒ¹å€¼
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="calculation-example" style="background-color: #fff3cd; border-color: #ffc107;">
                        <h3>ğŸ¯ B. ç‚ºäº†æŠ“åˆ°ã€Œæ—©æœŸå¤±æ•ˆã€(B1/B10)</h3>
                        <p>å·¥ç¨‹å¸«é€šå¸¸ä¸é—œå¿ƒå¹³å‡å£½å‘½ (\(\eta\), B63.2)ï¼Œè€Œæ˜¯é—œå¿ƒ<strong class="highlight-text">ã€Œæœ€æ—©å£çš„é‚£å¹¾é¡†ã€</strong> (B10 æˆ–
                            B1)ã€‚</p>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 15px 0;">
                            <div
                                style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #ff9800;">
                                <h5 style="margin: 0 0 8px 0;">ğŸ” æ•æ„Ÿå€åŸŸ</h5>
                                <p style="margin: 0;">Weibull åˆ†ä½ˆçš„<strong>å°¾ç«¯ï¼ˆæ—©æœŸå¤±æ•ˆå€ï¼‰</strong>å°æ•¸æ“šéå¸¸æ•æ„Ÿ</p>
                            </div>
                            <div
                                style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #ff9800;">
                                <h5 style="margin: 0 0 8px 0;">âš ï¸ åˆ¤æ–·å›°é›£</h5>
                                <p style="margin: 0;">å¦‚æœæ¨£æœ¬å¤ªå°‘ï¼Œä½ å¾ˆé›£ç¢ºå®šæœ€æ—©å¤±æ•ˆçš„é‚£é¡†æ˜¯ã€Œéš¨æ©Ÿçš„ç‰¹ä¾‹ã€é‚„æ˜¯ã€Œæ•´æ‰¹ç”¢å“çš„å¸¸æ…‹ã€</p>
                            </div>
                            <div
                                style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #ff9800;">
                                <h5 style="margin: 0 0 8px 0;">ğŸ“ˆ ç©©å®šæç¹ª</h5>
                                <p style="margin: 0;">æ•¸æ“šé‡å¤§æ‰èƒ½ç©©å®šæç¹ªå‡ºæ›²ç·šçš„å°¾ç«¯</p>
                            </div>
                        </div>
                    </div>

                    <div class="calculation-example" style="background-color: #f8f9fa; border-color: #495057;">
                        <h3>âš ï¸ C. ç¢ºèªå¤±æ•ˆæ¨¡å¼ (\(\beta\) å€¼)</h3>
                        <div
                            style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #495057; margin: 10px 0;">
                            <p><strong>\(\beta\) å€¼æ±ºå®šäº†ç”¢å“æ˜¯ã€Œæ—©å¤­ã€ã€ã€Œéš¨æ©Ÿå¤±æ•ˆã€é‚„æ˜¯ã€Œç£¨è€—ã€ã€‚</strong></p>
                            <div
                                style="background: linear-gradient(135deg, #ffebee, #ffcdd2); padding: 15px; border-radius: 8px; border: 2px solid #e74c3c; margin-top: 10px;">
                                <p><strong>âš ï¸
                                        æ¨£æœ¬å°‘æ™‚çš„å•é¡Œï¼š</strong>éš¨ä¾¿ä¸€é¡†ç•°å¸¸å€¼ï¼ˆOutlierï¼‰éƒ½æœƒè®“ç›´ç·šæ–œç‡åŠ‡çƒˆæ³¢å‹•ï¼Œå°è‡´ä½ èª¤åˆ¤å¤±æ•ˆæ¨¡å¼ï¼ˆä¾‹å¦‚æŠŠç£¨è€—èª¤åˆ¤ç‚ºéš¨æ©Ÿå¤±æ•ˆï¼‰ï¼Œé€²è€Œé¸éŒ¯æ”¹å–„æ–¹å‘ã€‚
                                </p>
                            </div>
                        </div>
                    </div>

                    <h3>ğŸ’¡ å¦‚æœé ç®—/æ™‚é–“æœ‰é™ï¼Œæ¨£æœ¬å¾ˆå°‘æ€éº¼è¾¦ï¼Ÿ(Mouldex å¯¦å‹™å»ºè­°)</h3>
                    <div class="calculation-example" style="background-color: #e3f2fd; border-color: #2196f3;">
                        <p>åœ¨æ¨¡å…·æˆ–é«˜å–®åƒ¹ç”¢å“åˆ†æä¸­ï¼Œå¾€å¾€ä¸å¯èƒ½æ¸¬ 20 é¡†ã€‚é€™æ™‚æœ‰å¹¾ç¨®ç­–ç•¥ï¼š</p>
                    </div>

                    <div class="calculation-example" style="background-color: #e8f5e9; border-color: #27ae60;">
                        <h3>ğŸš€ ç­–ç•¥ä¸€ï¼šä½¿ç”¨ã€ŒWeibayes åˆ†æã€(1åƒæ•¸ Weibull)</h3>
                        <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 15px; margin: 15px 0;">
                            <div
                                style="background: linear-gradient(135deg, #e8f5e9, #c8e6c9); padding: 15px; border-radius: 8px; border: 2px solid #27ae60;">
                                <h5 style="margin: 0 0 8px 0; color: #1b5e20;">ğŸ‘¥ é©ç”¨æƒ…å¢ƒ</h5>
                                <p style="margin: 0;">å¦‚æœä½ åªæœ‰å¾ˆå°‘çš„æ¨£æœ¬ï¼ˆä¾‹å¦‚ 2-3 é¡†ï¼‰ï¼Œç”šè‡³æ²’æœ‰å¤±æ•ˆï¼ˆå…¨éƒ½æ˜¯ Suspendedï¼‰ï¼Œä½†ä½ æœ‰éå»é¡ä¼¼ç”¢å“çš„ç¶“é©—ã€‚</p>
                            </div>
                            <div
                                style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #27ae60;">
                                <h5 style="margin: 0 0 8px 0;">ğŸ”§ æ–¹æ³•</h5>
                                <p style="margin: 0;"><strong>å›ºå®š \(\beta\) å€¼</strong>ï¼ˆæ ¹æ“šæ­·å²ç¶“é©—ï¼Œä¾‹å¦‚é‡‘å±¬ç–²å‹é€šå¸¸ \(\beta \approx
                                    3\)ï¼‰ï¼Œ<strong>åªè¨ˆç®— \(\eta\)</strong>ã€‚</p>
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #fff3e0, #ffe0b2); padding: 15px; border-radius: 8px; border: 2px solid #ff9800; grid-column: 1 / -1;">
                                <h5 style="margin: 0 0 8px 0; color: #d84315;">âœ… å„ªé»</h5>
                                <p style="margin: 0;"><strong>éœ€è¦çš„æ¨£æœ¬æ•¸æ¥µå°‘</strong>ï¼Œä¸”çµæœæ¯”æ¨™æº– Weibull æ›´å¯ä¿¡ï¼ˆå› ç‚ºåˆ©ç”¨äº†æ­·å²çŸ¥è­˜ï¼‰ã€‚</p>
                            </div>
                        </div>
                    </div>

                    <div class="calculation-example" style="background-color: #f8f9fa; border-color: #495057;">
                        <h3>ğŸ“Š ç­–ç•¥äºŒï¼šå¢åŠ ã€Œè¨­é™æ•¸æ“šã€(Suspended Data)</h3>
                        <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 15px; margin: 15px 0;">
                            <div
                                style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #495057;">
                                <h5 style="margin: 0 0 8px 0;">ğŸ”§ æ–¹æ³•</h5>
                                <p style="margin: 0;"><strong>ä½ å¯ä»¥åªæ¸¬åˆ° 2-3 é¡†å¤±æ•ˆ</strong>ï¼Œä½†åŒæ™‚æ”¾å…¥ 10 é¡†æ¨£å“ä¸€èµ·è·‘ã€‚ç•¶å‰ 3 é¡†å¤±æ•ˆå¾Œï¼Œåœæ­¢æ¸¬è©¦ã€‚
                                </p>
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #e3f2fd, #bbdefb); padding: 15px; border-radius: 8px; border: 2px solid #2196f3;">
                                <h5 style="margin: 0 0 8px 0; color: #15559a;">ğŸ’¡ åŸå› </h5>
                                <p style="margin: 0;"><strong>é‚£ 7
                                        é¡†æœªå¤±æ•ˆçš„æ•¸æ“š</strong>ï¼ˆå³è¨­é™ï¼‰é›–ç„¶æ²’å£ï¼Œä½†å®ƒå€‘æä¾›äº†ã€Œé€™æ®µæ™‚é–“å…§æ²’å£ã€çš„è³‡è¨Šï¼Œé€™èƒ½<strong>é¡¯è‘—æå‡åˆ†æçš„æº–ç¢ºåº¦</strong>ï¼Œæ¯”åªæ¸¬ 3
                                    é¡†å…¨éƒ¨æ¸¬åˆ°å£è¦å¥½å¾—å¤šã€‚</p>
                            </div>
                        </div>
                    </div>

                    <h3>ğŸ¯ ç¸½çµå»ºè­°</h3>
                    <div class="calculation-example" style="background-color: #f8f9fa; border-color: #495057;">
                        <p>å°æ–¼ <strong>Mouldex çš„æ‡‰ç”¨å ´æ™¯</strong>ï¼š</p>

                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 15px 0;">
                            <div
                                style="background: linear-gradient(135deg, #e8f5e9, #c8e6c9); padding: 15px; border-radius: 8px; border: 2px solid #27ae60;">
                                <h5 style="margin: 0 0 8px 0; color: #1b5e20;">ğŸŸ¢ ç†æƒ³æƒ…æ³</h5>
                                <p style="margin: 0;"><strong>ç›¡é‡çˆ­å– <span class="highlight-text">10
                                            é¡†ä»¥ä¸Š</span></strong>çš„æ¨£æœ¬ã€‚</p>
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #fff3e0, #ffe0b2); padding: 15px; border-radius: 8px; border: 2px solid #ff9800;">
                                <h5 style="margin: 0 0 8px 0; color: #d84315;">ğŸŸ  æœ€ä½åº•ç·š</h5>
                                <p style="margin: 0;"><strong>è‡³å°‘è¦æœ‰ <span class="highlight-text">5-6 é¡†</span></strong>ã€‚
                                </p>
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #e3f2fd, #bbdefb); padding: 15px; border-radius: 8px; border: 2px solid #2196f3;">
                                <h5 style="margin: 0 0 8px 0; color: #15559a;">ğŸ”µ æ¸¬è©¦ç­–ç•¥</h5>
                                <p style="margin: 0;">å¦‚æœåªèƒ½æ¸¬åˆ°å°‘æ•¸å¹¾é¡†å£æ‰ï¼Œè«‹å‹™å¿…ä¿ç•™é‚£äº›ã€Œé‚„æ²’å£ã€çš„æ•¸æ“šä½œç‚º<strong>å³è¨­é™ (Suspended)</strong>
                                    è¼¸å…¥åˆ°æˆ‘å€‘å‰›åšå¥½çš„ç¶²é å·¥å…·ä¸­ï¼Œé€™æ¨£èƒ½å¤§å¹…æå‡æº–ç¢ºåº¦ã€‚</p>
                            </div>
                        </div>
                    </div>

                    <h2>6. ğŸ› ï¸ å¦‚ä½•å–å¾—åƒæ•¸ (\(\beta, \eta\))</h2>
                    <div class="calculation-example" style="background-color: #f8f9fa; border-color: #495057;">
                        <p>åœ¨å¯¦éš›å·¥ç¨‹ä¸­ï¼Œæˆ‘å€‘ä¸æœƒæ‰‹ç®—åƒæ•¸ï¼Œé€šå¸¸ä½¿ç”¨åœ–è§£æ³•æˆ–è»Ÿé«”ï¼ˆå¦‚ä¸Šæ–¹è¨ˆç®—æ©Ÿï¼‰ï¼š</p>
                    </div>

                    <h3>ğŸ“ˆ åœ–è§£æ³• (Excel åŸç†)</h3>
                    <div class="calculation-example" style="background-color: #e8f8f5; border-color: #27ae60;">
                        <p>åˆ©ç”¨ Weibull ç·šæ€§åŒ–å…¬å¼è£½ä½œæ•£ä½ˆåœ–ï¼š</p>
                        <div class="formula-box">
                            $$ \ln(-\ln(1 - F(t))) = \beta \ln(t) - \beta \ln(\eta) $$
                            <p style="font-size: 0.85em; color: #555; margin-top: 8px; text-align: center;">ğŸ’¡
                                åœ¨åœ–è¡¨ä¸­ï¼Œè¶¨å‹¢ç·šçš„<strong>æ–œç‡å³ç‚º \(\beta\)</strong></p>
                        </div>
                        <div
                            style="background: linear-gradient(135deg, #fff3e0, #ffe0b2); padding: 15px; border-radius: 8px; border: 2px solid #ff9800; margin-top: 10px;">
                            <h5 style="margin: 0 0 8px 0; color: #d84315;">ğŸ” é—œéµè¦é»</h5>
                            <p style="margin: 0;"><strong>æ–œç‡ = \(\beta\)</strong>ï¼ˆå½¢ç‹€åƒæ•¸ï¼‰<br>
                                <strong>æˆªè· = \(-\beta \ln(\eta)\)</strong>ï¼ˆå¯ç”¨ä¾†è¨ˆç®— \(\eta\)ï¼‰
                            </p>
                        </div>
                    </div>

                    <h3>ğŸ’» Python ç¨‹å¼ç¯„ä¾‹</h3>
                    <div class="code-block">
                        <h5 style="margin: 0 0 10px 0; color: #2c3e50;">ğŸ ä½¿ç”¨ lifelines å¥—ä»¶</h5>
                        <pre>from lifelines import WeibullFitter

# 1. è¼¸å…¥å¤±æ•ˆæ™‚é–“æ•¸æ“š
T = [100, 150, 200, 280, 400]

# 2. æ“¬åˆæ•¸æ“š
wf = WeibullFitter()
wf.fit(T)

# 3. è¼¸å‡ºåƒæ•¸
print(f"Beta (rho_): {wf.rho_}")
print(f"Eta (lambda_): {wf.lambda_}")

# 4. (å¯é¸) è¨ˆç®—ç‰¹å®šæ™‚é–“çš„å¯é åº¦
reliability_at_500 = wf.survival_function_at_times(500)
print(f"Reliability at 500hrs: {reliability_at_500}")</pre>
                        <div
                            style="background: linear-gradient(135deg, #e3f2fd, #bbdefb); padding: 10px; border-radius: 5px; border: 2px solid #2196f3; margin-top: 10px;">
                            <h6 style="margin: 0 0 5px 0; color: #15559a;">ğŸ’¡ èªªæ˜</h6>
                            <ul style="margin: 0; padding-left: 20px;">
                                <li><strong>lifelines</strong> æ˜¯ Python ä¸­å°ˆé–€ç”¨æ–¼ç”Ÿå­˜åˆ†æçš„å¥—ä»¶</li>
                                <li><strong>wf.fit()</strong> æœƒè‡ªå‹•è¨ˆç®—æœ€ä½³çš„ \(\beta\) å’Œ \(\eta\)</li>
                                <li><strong>survival_function_at_times()</strong> å¯è¨ˆç®—ç‰¹å®šæ™‚é–“çš„å¯é åº¦</li>
                            </ul>
                        </div>
                    </div>

                    <h2>7. ğŸ“Š ç‚ºä»€éº¼éœ€è¦è¼ƒå¤šæ¨£æœ¬ï¼Ÿ</h2>
                    <div class="calculation-example" style="background-color: #e8f8f5; border-color: #27ae60;">
                        <h3>ğŸ“ A. ä¿¡è³´å€é–“çš„å¯¬åº¦</h3>
                        <p>æ¨£æœ¬è¶Šå°‘ï¼Œä¸ç¢ºå®šæ€§è¶Šé«˜ã€‚5 é¡†æ¨£å“çš„ B10 ä¿¡è³´å€é–“å¯èƒ½éå¸¸å¯¬ï¼›20 é¡†å‰‡æ˜é¡¯æ”¶æ–‚ã€‚</p>
                    </div>
                    <div class="calculation-example" style="background-color: #fff3cd; border-color: #ffc107;">
                        <h3>ğŸ¯ B. æ—©æœŸå¤±æ•ˆå°¾ç«¯çš„æ•æ„Ÿåº¦</h3>
                        <p>B1/B10 å±¬æ–¼åˆ†ä½ˆå°¾ç«¯ï¼Œå°å°‘é‡ç•°å¸¸å€¼æ¥µç‚ºæ•æ„Ÿï¼Œéœ€è¼ƒå¤šæ¨£æœ¬ç©©å®šä¼°è¨ˆã€‚</p>
                    </div>
                    <div class="calculation-example" style="background-color: #f8f9fa; border-color: #495057;">
                        <h3>âš ï¸ C. ç¢ºèªå¤±æ•ˆæ¨¡å¼ (\(\beta\) å€¼)</h3>
                        <p>æ¨£æœ¬å¤ªå°‘æ™‚ï¼Œæ–œç‡å®¹æ˜“å—å–®é»å½±éŸ¿è€Œèª¤åˆ¤å¤±æ•ˆå‹æ…‹ï¼Œå°è‡´éŒ¯èª¤æ”¹å–„æ–¹å‘ã€‚</p>
                    </div>

                    <h2>8. ğŸ’¡ å¯¦å‹™ç­–ç•¥</h2>
                    <div class="calculation-example" style="background-color: #e3f2fd; border-color: #2196f3;">
                        <h3>ğŸš€ ç­–ç•¥ä¸€ï¼šWeibayes (1 åƒæ•¸ Weibull)</h3>
                        <p>æ¨£æœ¬æ¥µå°‘æˆ–å¤šç‚ºè¨­é™æ™‚ï¼Œä¾æ­·å²ç¶“é©—å›ºå®š \(\beta\)ï¼Œåƒ…ä¼° \(\eta\)ã€‚</p>
                    </div>
                    <div class="calculation-example" style="background-color: #f8f9fa; border-color: #495057;">
                        <h3>ğŸ“Š ç­–ç•¥äºŒï¼šå¢åŠ è¨­é™æ•¸æ“š</h3>
                        <p>å°‘é‡å¤±æ•ˆæ­é…æ›´å¤šè¨­é™æ¨£æœ¬ï¼Œå¯é¡¯è‘—æå‡æ“¬åˆç©©å®šåº¦ã€‚</p>
                    </div>

                    <h2>9. ğŸ¯ å¯¦å‹™ç¸½çµ</h2>
                    <div class="calculation-example" style="background-color: #f8f9fa; border-color: #495057;">
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
                            <div
                                style="background: linear-gradient(135deg, #e8f5e9, #c8e6c9); padding: 15px; border-radius: 8px; border: 2px solid #27ae60;">
                                <h5 style="margin: 0 0 8px 0; color: #1b5e20;">ğŸ“Š æ•¸æ“šè’é›†</h5>
                                <p style="margin: 0;"><strong>è‡³å°‘è’é›† 10 é¡†ä»¥ä¸Šæ¨£æœ¬</strong>ï¼Œä¸¦ä¿ç•™è¨­é™æ•¸æ“š</p>
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #e3f2fd, #bbdefb); padding: 15px; border-radius: 8px; border: 2px solid #2196f3;">
                                <h5 style="margin: 0 0 8px 0; color: #15559a;">ğŸ” åƒæ•¸æª¢è¦–</h5>
                                <p style="margin: 0;"><strong>åŒæ™‚æª¢è¦– \(\beta\)ã€\(\eta\)ã€\(R^2\) ä¸‰è€…</strong>ä»¥åˆ¤è®€å¤±æ•ˆå‹æ…‹èˆ‡å£½å‘½</p>
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #fff3e0, #ffe0b2); padding: 15px; border-radius: 8px; border: 2px solid #ff9800;">
                                <h5 style="margin: 0 0 8px 0; color: #d84315;">ğŸ’¼ å•†å‹™æºé€š</h5>
                                <p style="margin: 0;"><strong>ä»¥ Bâ€‘Life æŒ‡æ¨™æºé€š</strong>å·¥ç¨‹èˆ‡å•†å‹™ï¼ˆä¿å›ºã€å£½å‘½ã€æ”¹å–„å¹…åº¦ï¼‰</p>
                            </div>
                        </div>
                    </div>

                    <h2>10. ğŸ”¬ å·®ç•°åˆ†æçš„ç†è«–è£œå……ï¼ˆé›™çµ„æ¯”è¼ƒï¼‰</h2>
                    <div class="calculation-example" style="background-color: #f8f9fa; border-color: #495057;">
                        <h3>ğŸ“Š \(\beta\) å·®ç•°çš„æ„ç¾©</h3>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 15px 0;">
                            <div
                                style="background: linear-gradient(135deg, #ffebee, #ffcdd2); padding: 15px; border-radius: 8px; border: 2px solid #e74c3c;">
                                <h5 style="margin: 0 0 8px 0; color: #7f1d1d;">ğŸ”´ \(\beta_B > \beta_A\)</h5>
                                <p style="margin: 0;">B çµ„å¤±æ•ˆç‡éš¨æ™‚é–“ä¸Šå‡æ›´å¿«ï¼Œå±¬ç£¨è€—åŠ åŠ‡ï¼Œå°¾ç«¯å¤±æ•ˆæ›´é›†ä¸­</p>
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #e8f5e9, #c8e6c9); padding: 15px; border-radius: 8px; border: 2px solid #27ae60;">
                                <h5 style="margin: 0 0 8px 0; color: #1b5e20;">ğŸŸ¢ \(\beta_B \approx \beta_A\)</h5>
                                <p style="margin: 0;">å…©çµ„å¤±æ•ˆå‹æ…‹ç›¸è¿‘ï¼Œé©åˆç”¨ \(\eta\) æˆ– Bâ€‘Life ç›´æ¥æ¯”è¼ƒå£½å‘½</p>
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #fff3e0, #ffe0b2); padding: 15px; border-radius: 8px; border: 2px solid #ff9800;">
                                <h5 style="margin: 0 0 8px 0; color: #d84315;">ğŸŸ  \(\beta_B < \beta_A\)</h5>
                                        <p style="margin: 0;">B çµ„è¼ƒå‚¾å‘æ—©æœŸå¤±æ•ˆï¼Œéœ€æª¢è¨è£½ç¨‹ï¼å“è³ªä¸€è‡´æ€§</p>
                            </div>
                        </div>
                    </div>

                    <h3>ğŸ“ˆ \(\eta\) æ”¹å–„ç‡çš„åˆ¤è®€</h3>
                    <div class="formula-box" style="margin: 15px 0;">
                        <h4 style="margin: 0 0 10px 0; text-align: center;">ğŸ”„ æ”¹å–„ç‡å…¬å¼</h4>
                        $$ \text{\% æ”¹å–„} = \left(\frac{\eta_B}{\eta_A} - 1\right) \times 100\% $$
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
                        <div
                            style="background: linear-gradient(135deg, #e3f2fd, #bbdefb); padding: 15px; border-radius: 8px; border: 2px solid #2196f3;">
                            <h5 style="margin: 0 0 8px 0; color: #15559a;">ğŸ¯ é©ç”¨æƒ…å¢ƒ</h5>
                            <p style="margin: 0;"><strong>\(|\beta_B - \beta_A| \le 0.2\)</strong>ï¼ˆå¤±æ•ˆå‹æ…‹è¿‘ä¼¼ï¼‰</p>
                        </div>
                        <div
                            style="background: linear-gradient(135deg, #e8f5e9, #c8e6c9); padding: 15px; border-radius: 8px; border: 2px solid #27ae60;">
                            <h5 style="margin: 0 0 8px 0; color: #1b5e20;">ğŸ”¢ è§£è®€</h5>
                            <p style="margin: 0;"><strong>\(\eta_B/\eta_A = 1.30\)</strong> è¡¨ç¤ºå£½å‘½å»¶é•·ç´„ 30%</p>
                        </div>
                    </div>

                    <h3>ğŸ”„ ç•¶ \(\beta\) ä¸åŒæ™‚çš„æ¯”è¼ƒæ–¹å¼</h3>
                    <div class="calculation-example" style="background-color: #e8f8f5; border-color: #27ae60;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div
                                style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #27ae60;">
                                <h5 style="margin: 0 0 8px 0;">ğŸ“Œ å›ºå®šå¯é åº¦æ¯”è¼ƒ</h5>
                                <p style="margin: 0;">é¸å®š \(R\)ï¼ˆå¦‚ 95%ã€90%ï¼‰ï¼Œæ¯”è¼ƒå…©çµ„çš„ \(t(R)\)</p>
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #fff3e0, #ffe0b2); padding: 15px; border-radius: 8px; border: 2px solid #ff9800;">
                                <h5 style="margin: 0 0 8px 0; color: #d84315;">ğŸ¯ Bâ€‘Life æ¯”è¼ƒ</h5>
                                <p style="margin: 0;">ä»¥ \(B10\)ã€\(B50\) æˆ– \(B1\) ç‚ºæŒ‡æ¨™ï¼Œæ¯”è¼ƒ \(t_{B,\,x} / t_{A,\,x}\)</p>
                            </div>
                        </div>
                    </div>

                    <div class="formula-box" style="margin: 15px 0;">
                        <h4 style="margin: 0 0 10px 0; text-align: center;">ğŸ§® æ¯”è¼ƒå…¬å¼</h4>
                        $$ t(R) = \eta \times \big(-\ln(R)\big)^{1/\beta} $$
                    </div>

                    <div
                        style="background: linear-gradient(135deg, #e3f2fd, #bbdefb); padding: 15px; border-radius: 8px; border: 2px solid #2196f3; margin: 15px 0;">
                        <h5 style="margin: 0 0 8px 0; color: #15559a;">âœ… å„ªé»</h5>
                        <p style="margin: 0;"><strong>é¿å…åƒ…ä»¥ \(\eta\) åˆ¤æ–·è€Œå¿½ç•¥ \(\beta\) å°å°¾ç«¯çš„å½±éŸ¿</strong></p>
                    </div>

                    <h3>ğŸ“š åˆ¤è®€ç¯„ä¾‹ï¼ˆæ–‡å­—åŒ–ï¼‰</h3>
                    <div
                        style="background: linear-gradient(135deg, #e8f6f3, #d1f2eb); padding: 15px; border-radius: 8px; border: 2px solid #27ae60; margin: 15px 0;">
                        <h5 style="margin: 0 0 10px 0; color: #1b5e20;">ğŸ“– å¯¦éš›æ¡ˆä¾‹</h5>
                        <div
                            style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #27ae60; margin: 10px 0;">
                            <h6 style="margin: 0 0 8px 0;">ä¾‹ä¸€ï¼ˆå‹æ…‹ç›¸è¿‘ï¼‰ï¼š</h6>
                            <p style="margin: 0 0 10px 0;"><strong>\(\beta_A = 1.2,\ \eta_A = 500;\ \beta_B = 1.2,\
                                    \eta_B = 650\)</strong><br>
                                å‰‡ \(\eta\) æ”¹å–„ â‰ˆ 30%ï¼ŒB10 æ¯”è¼ƒäº¦ç´„ 30% æå‡ã€‚</p>

                            <h6 style="margin: 15px 0 8px 0;">ä¾‹äºŒï¼ˆå‹æ…‹ä¸åŒï¼‰ï¼š</h6>
                            <p style="margin: 0;"><strong>\(\beta_A = 1.0,\ \eta_A = 520;\ \beta_B = 1.6,\ \eta_B =
                                    650\)</strong><br>
                                ä»¥ \(R=90\%\) æ¯”è¼ƒï¼šè¨ˆç®— \(t_A(0.9)\) èˆ‡ \(t_B(0.9)\)ï¼›è‹¥ \(t_B/t_A > 1\)ï¼Œè¡¨ç¤ºåœ¨è©²å¯é åº¦ä¸‹ B çµ„æ›´è€ä¹…ã€‚</p>
                        </div>
                    </div>

                    <h3>ğŸ¯ åˆ¤è®€å„ªå…ˆé †åº</h3>
                    <div
                        style="background: linear-gradient(135deg, #2c3e50, #34495e); padding: 5px; border-radius: 10px; margin: 20px 0;">
                        <table
                            style="width:100%; border-collapse:collapse; background: white; border-radius: 8px; overflow: hidden;">
                            <thead>
                                <tr style="background: linear-gradient(135deg, #34495e, #2c3e50); color: white;">
                                    <th style="padding: 12px; border: 1px solid #bdc3c7; font-size: 1.05em;">æ­¥é©Ÿ</th>
                                    <th style="padding: 12px; border: 1px solid #bdc3c7; font-size: 1.05em;">é‡é»</th>
                                    <th style="padding: 12px; border: 1px solid #bdc3c7; font-size: 1.05em;">èªªæ˜</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="background: linear-gradient(135deg, #ffebee, #ffcdd2);">
                                    <td
                                        style="padding: 10px; border: 1px solid #bdc3c7; text-align:center; font-weight: bold; color: #7f1d1d;">
                                        1</td>
                                    <td
                                        style="padding: 10px; border: 1px solid #bdc3c7; text-align:center; font-weight: bold;">
                                        æª¢æŸ¥ \(R^2\)</td>
                                    <td style="padding: 10px; border: 1px solid #bdc3c7;">æ“¬åˆåº¦ä¸è¶³æ™‚é¿å…æ·±å…¥æ¯”è¼ƒ</td>
                                </tr>
                                <tr style="background: linear-gradient(135deg, #e3f2fd, #bbdefb);">
                                    <td
                                        style="padding: 10px; border: 1px solid #bdc3c7; text-align:center; font-weight: bold; color: #15559a;">
                                        2</td>
                                    <td
                                        style="padding: 10px; border: 1px solid #bdc3c7; text-align:center; font-weight: bold;">
                                        æ¯”è¼ƒ \(\beta\)</td>
                                    <td style="padding: 10px; border: 1px solid #bdc3c7;">å‹æ…‹ç›¸è¿‘è€…å¯ç›´æ¥ç”¨
                                        \(\eta\)/Bâ€‘Lifeï¼›å‹æ…‹ä¸åŒç”¨ \(t(R)\)</td>
                                </tr>
                                <tr style="background: linear-gradient(135deg, #fff3e0, #ffe0b2);">
                                    <td
                                        style="padding: 10px; border: 1px solid #bdc3c7; text-align:center; font-weight: bold; color: #d84315;">
                                        3</td>
                                    <td
                                        style="padding: 10px; border: 1px solid #bdc3c7; text-align:center; font-weight: bold;">
                                        é¸æ“‡æ¯”è¼ƒæŒ‡æ¨™</td>
                                    <td style="padding: 10px; border: 1px solid #bdc3c7;">ç›¸è¿‘ï¼š\(\eta\) æ”¹å–„ç‡ï¼›ä¸åŒï¼šå›ºå®š \(R\) æˆ–
                                        Bâ€‘Life</td>
                                </tr>
                                <tr style="background: linear-gradient(135deg, #e8f5e9, #c8e6c9);">
                                    <td
                                        style="padding: 10px; border: 1px solid #bdc3c7; text-align:center; font-weight: bold; color: #1b5e20;">
                                        4</td>
                                    <td
                                        style="padding: 10px; border: 1px solid #bdc3c7; text-align:center; font-weight: bold;">
                                        å½¢æˆçµè«–</td>
                                    <td style="padding: 10px; border: 1px solid #bdc3c7;">ç”¨æ˜ç¢ºç™¾åˆ†æ¯”æˆ–æ™‚é–“æ¯”å€¼å‘ˆç¾å·®ç•°</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="batch-buttons" style="grid-template-columns: 1fr;">
                    <button class="btn-clear" onclick="closeTheory()">é—œé–‰</button>
                </div>
            </div>
        </div>
</body>

</html>